
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.33.0" theme-name="Stellar" theme-version="1.33.0">
  
  
  <meta name="generator" content="Hexo 7.1.1">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  <title>读《快乐的Linux命令行》记录 - Fingsinz</title>

  
  <meta name="description" content="关键词： Linux">
  
  <meta name="keywords" content="Linux">

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.33.0">


  

  

  <script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Fingsinz","sameAs":[],"image":"/images/avatar.jpg"},"dateCreated":"2024-07-10T14:31:36+08:00","dateModified":"2024-07-18T18:35:17+08:00","datePublished":"2024-07-10T14:31:36+08:00","description":"关键词： Linux","headline":"读《快乐的Linux命令行》记录","mainEntityOfPage":{"@type":"WebPage","@id":"https://fingsinz.space/2024/linux-command-line/"},"publisher":{"@type":"Organization","name":"Fingsinz","sameAs":[],"image":"/images/avatar.jpg","logo":{"@type":"ImageObject","url":"/images/avatar.jpg"}},"url":"https://fingsinz.space/2024/linux-command-line/","keywords":"Linux","image":[]}</script>
  

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head>
<body>

<div class="l_body content" id="start" layout="post" type="tech" ><aside class="l_left"><div class="sidebg"></div><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/images/avatar.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main">Fingsinz</div><div class="sub cap">Fingsinz's space</div></a></div></header>

<div class="nav-area">

<nav class="menu dis-select"><a class="nav-item active" title="博客" href="/" style="color:#c7c6b6"><span>博客</span></a><a class="nav-item" title="笔记" href="/notebooks/" style="color:#9a6655"><span>笔记</span></a><a class="nav-item" title="文档" href="/wiki/" style="color:#a72126"><span>文档</span></a><a class="nav-item" title="探索" href="/explore/" style="color:#12264f"><span>探索</span></a></nav>
</div>
<div class="widgets"></div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></div>
<div class="flex-row" id="post-meta"><span class="text created">发布于：<time datetime="2024-07-10T06:31:36.000Z">2024-07-10</time></span><span class="sep updated"></span><span class="text updated">更新于：<time datetime="2024-07-18T10:35:17.749Z">2024-07-18</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>读《快乐的Linux命令行》记录</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><p>关键词： Linux</p>
<span id="more"></span>
<hr>
<blockquote>
<p>Reference：<a target="_blank" rel="noopener" href="https://billie66.github.io/TLCL/">TLCL (billie66.github.io)</a></p>
</blockquote>
<h2 id="引言">引言</h2>
<blockquote>
<p>图形用户界面（Graphical User Interface，GUI）让简单的任务更容易完成，而命令行界面（Command Line Interface，CLI）使完成复杂的任务成为可能。</p>
</blockquote>
<p>《快乐的Linux命令行》一书面向现代 Linux 命令行用户，传授如何与命令行界面友好相处，如何工作？能做什么？使用命令行最好的方法是什么？</p>
<p>前提条件：</p>
<ul>
<li>安装 Linux 系统</li>
</ul>
<p><em>可使用 WSL，<a target="_blank" rel="noopener" href="https://www.fingsinz.space/2024/20/">WSL安装记录</a></em></p>
<h2 id="学习-shell">学习 shell</h2>
<h3 id="一-什么是shell">一、什么是shell</h3>
<h4 id="1-1-初次接触">1.1 初次接触</h4>
<p>shell 是一个程序，能够接受命令并且传递给操作系统执行。Linux 发行版都提供一个名为 <code>bash</code> 的shell 程序。bash 全称为 Bourne Again Shell。</p>
<p>同时，终端（Terminal）也能访问 shell。启动终端时，提示如下：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$</span><br></pre></td></tr></tbody></table></figure>
<p>其解释如下：<code>当前用户名@主机名:工作目录$</code>。</p>
<ul>
<li>其中 <code>$</code> 表示这个终端具有 root（超级管理员）权限；</li>
<li>如果是 <code>#</code> 则表示当前权限是普通用户权限。</li>
</ul>
<p>可以尝试输入一些命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ abcd</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>上面的命令并不是一条有效命令，只是举例。</li>
</ul>
<p>还有，可以通过 <code>↑</code> 按键获取上次输入的命令，也可以通过 <code>←</code> 或 <code>→</code> 按键移动光标从而编辑命令。</p>
<p><strong>不要尝试在终端里使用 <code>ctrl + c</code> 和 <code>ctrl + v</code> 进行拷贝粘贴操作</strong>，这两个控制代码有着不同的含义。</p>
<h4 id="1-2-简单命令">1.2 简单命令</h4>
<p>现在尝试运行一些简单的命令：</p>
<ol>
<li><code>date</code>，显示系统当前时间和日期。</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">date</span></span><br><span class="line">Tue Jul  9 13:53:43 CST 2024</span><br></pre></td></tr></tbody></table></figure>
<ol start="2">
<li><code>cal</code>，显示当前月份日历。</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ cal</span><br><span class="line">     July 2024</span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">    1  2  3  4  5  6</span><br><span class="line"> 7  8  9 10 11 12 13</span><br><span class="line">14 15 16 17 18 19 20</span><br><span class="line">21 22 23 24 25 26 27</span><br><span class="line">28 29 30 31</span><br></pre></td></tr></tbody></table></figure>
<ol start="3">
<li><code>df</code>，查看磁盘剩余空间数量。</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">df</span></span><br><span class="line">Filesystem     1K-blocks      Used Available Use% Mounted on</span><br><span class="line">/dev/sdb       263174212   1673872 248062184   1% /</span><br><span class="line">tmpfs            6499788         0   6499788   0% /mnt/wsl</span><br><span class="line">tools          124064548 105175296  18889252  85% /init</span><br><span class="line">none             6497704         0   6497704   0% /dev</span><br><span class="line">none             6499788        16   6499772   1% /run</span><br><span class="line">none             6499788         0   6499788   0% /run/lock</span><br><span class="line">none             6499788         0   6499788   0% /run/shm</span><br><span class="line">none             6499788         0   6499788   0% /run/user</span><br><span class="line">tmpfs            6499788         0   6499788   0% /sys/fs/cgroup</span><br><span class="line">drivers        124064548 105175296  18889252  85% /usr/lib/wsl/drivers</span><br><span class="line">lib            124064548 105175296  18889252  85% /usr/lib/wsl/lib</span><br><span class="line">C:\            124064548 105175296  18889252  85% /mnt/c</span><br><span class="line">D:\            124708860 102747776  21961084  83% /mnt/d</span><br><span class="line">E:\            488372220 367103492 121268728  76% /mnt/e</span><br><span class="line">F:\            488372220 416662024  71710196  86% /mnt/f</span><br></pre></td></tr></tbody></table></figure>
<ol start="4">
<li><code>free</code>，显示空闲内存的数量。</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ free</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:       12999576       86816    11784240          80     1128520    12640980</span><br><span class="line">Swap:       4194304           0     4194304</span><br></pre></td></tr></tbody></table></figure>
<ol start="5">
<li><code>exit</code>，关闭终端。</li>
</ol>
<h4 id="1-3-幕后控制台">1.3 幕后控制台</h4>
<p>在完全的 Linux 系统下，即使终端仿真器没有运行，在后台仍然有几个终端运行着。它们叫做虚拟终端或者是虚拟控制台。这些终端会话都可以通过按下 <code>Ctrl + Alt + F1</code> 到 <code>Ctrl + Alt + F6</code> 访问。当一个会话被访问的时候，它会显示登录提示框，需要输入用户名和密码。要从一个虚拟控制台转换到另一个，按下 Alt 和 F1-F6 （中的一个）。返回图形桌面，按下 <code>Alt + F7</code>。</p>
<h3 id="二-文件系统中跳转">二、文件系统中跳转</h3>
<h4 id="2-1-理解文件系统树">2.1 理解文件系统树</h4>
<p>Linux 以分层目录结构来组织所有文件，将所有文件组成了一棵树型目录。文件系统中的第一级目录称为<strong>根目录（/）</strong>。根目录包含文件和子目录， 子目录包含更多的文件和子目录。</p>
<p>当首次登录系统（或者启动终端仿真器会话）后，当前工作目录是<strong>家目录</strong>（~）。每个用户都有他自己的家目录，当用户以普通用户的身份操控系统时，家目录是唯一允许用户写入文件的地方。</p>
<h4 id="2-2-文件目录的相关命令">2.2 文件目录的相关命令</h4>
<p>命令 <code>ls</code> 可以列出（一个或多个）目录（默认是工作目录）的内容：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> /</span><br><span class="line">bin   dev  home  lib    lib64       media  opt   root  sbin  srv  tmp  var</span><br><span class="line">boot  etc  init  lib32  lost+found  mnt    proc  run   snap  sys  usr</span><br></pre></td></tr></tbody></table></figure>
<p>命令 <code>pwd</code> （print working directory）可以显示当前工作目录：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">pwd</span></span><br><span class="line">/home/fingsinz</span><br></pre></td></tr></tbody></table></figure>
<p>命令 <code>cd</code> 可以进入某个目录，把某个目录作为工作目录：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cd</span> /</span><br><span class="line">fingsinz@FingsinzStudio:/$ <span class="built_in">ls</span></span><br><span class="line">bin   dev  home  lib    lib64       media  opt   root  sbin  srv  tmp  var</span><br><span class="line">boot  etc  init  lib32  lost+found  mnt    proc  run   snap  sys  usr</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>
<p><code>cd</code> 的目录可用绝对路径或相对路径。</p>
</li>
<li>
<p>绝对路径是以根目录 <code>/</code> 开始。</p>
</li>
<li>
<p>相对路径中，<code>.</code> 表示当前工作目录，<code>..</code> 表示当前工作目录的上一级目录（父目录）。</p>
</li>
</ul>
<p><code>cd</code> 有一些快捷的输入：</p>
<ul>
<li>
<p><code>cd</code> 可以更改工作目录到家目录</p>
</li>
<li>
<p><code>cd -</code> 可以更改工作目录到先前的工作目录。</p>
</li>
<li>
<p><code>cd ~user_name</code> 可以更改工作目录到用户家目录。</p>
</li>
</ul>
<h4 id="2-3-文件名的相关规则">2.3 文件名的相关规则</h4>
<blockquote>
<p>关于文件名的重要规则</p>
<ol>
<li>以 “.” 字符开头的文件名是隐藏文件。这仅表示，ls 命令不能列出它们，需要用 ls -a 命令。当创建帐号后，几个配置帐号的隐藏文件被放置在家目录下。另外，一些应用程序也会把它们的配置文件以隐藏文件的形式放在你的家目录下面。</li>
<li>文件名和命令名是大小写敏感的。文件名 “File1” 和 “file1” 是指两个不同的 文件名。</li>
<li>Linux 没有“文件扩展名”的概念。可以用你喜欢的任何名字来给文件起名。文件内容或用途由其它方法来决定。虽然类 Unix 的操作系统，不用文件扩展名来决定文件的内容或用途，但是有些应用程序会。</li>
<li>虽然 Linux 支持长文件名，文件名可能包含空格，标点符号，但标点符号仅限“.”、“－”、下划线。最重要的是，不要在文件名中使用空格。如果你想表示词与词间的空格，用下划线字符来代替。</li>
</ol>
</blockquote>
<h3 id="三-探究操作系统">三、探究操作系统</h3>
<h4 id="3-1-查询命令帮助">3.1 查询命令帮助</h4>
<p>命令通常会有一些选项，选项通过一些参数设定，如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> -options arguments</span><br></pre></td></tr></tbody></table></figure>
<p>当不清楚命令的用法时，可以使用 <code>man</code> 进行查询，了解其功能以及参数，如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man <span class="built_in">ls</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="3-2-ls-的乐趣">3.2 ls 的乐趣</h4>
<p>对于 <code>ls</code> 比较常用的估计是 <code>ls -l</code>：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:/$ <span class="built_in">ls</span> -l</span><br><span class="line">total 420</span><br><span class="line">drwxr-xr-x   2 root root   4096 Jul  9 12:04 bin</span><br><span class="line">drwxr-xr-x   2 root root   4096 May 21  2019 boot</span><br><span class="line">drwxr-xr-x   8 root root   2740 Jul  9 12:12 dev</span><br><span class="line">drwxr-xr-x  91 root root   4096 Jul  9 12:44 etc</span><br><span class="line">drwxr-xr-x   3 root root   4096 Jul  9 12:05 home</span><br><span class="line">-rwxr-xr-x   2 root root 644432 Aug  1  2023 init</span><br><span class="line">drwxr-xr-x  20 root root   4096 Jul  9 12:42 lib</span><br><span class="line">drwxr-xr-x   2 root root   4096 Jul  9 12:42 lib32</span><br><span class="line">drwxr-xr-x   2 root root   4096 Jul  9 12:23 lib64</span><br><span class="line">drwx------   2 root root  16384 Apr 11  2019 lost+found</span><br><span class="line">drwxr-xr-x   2 root root   4096 May 21  2019 media</span><br><span class="line">drwxr-xr-x   7 root root   4096 Jul  9 12:04 mnt</span><br><span class="line">drwxr-xr-x   2 root root   4096 May 21  2019 opt</span><br><span class="line">dr-xr-xr-x 153 root root      0 Jul  9 12:12 proc</span><br><span class="line">drwx------   2 root root   4096 May 21  2019 root</span><br><span class="line">drwxr-xr-x   9 root root    220 Jul  9 12:23 run</span><br><span class="line">drwxr-xr-x   2 root root   4096 Jul  9 12:04 sbin</span><br><span class="line">drwxr-xr-x   2 root root   4096 Mar 21  2019 snap</span><br><span class="line">drwxr-xr-x   2 root root   4096 May 21  2019 srv</span><br><span class="line">dr-xr-xr-x  11 root root      0 Jul  9 12:12 sys</span><br><span class="line">drwxrwxrwt   2 root root   4096 Jul  9 12:47 tmp</span><br><span class="line">drwxr-xr-x  11 root root   4096 Jul  9 12:42 usr</span><br><span class="line">drwxr-xr-x  13 root root   4096 May 21  2019 var</span><br></pre></td></tr></tbody></table></figure>
<p>对于上面输出的第一行 <code>drwxr-xr-x   2 root root   4096 Jul  9 12:04 bin</code>，含义依次如下：</p>
<ul>
<li><code>drwxr-xr-x</code> 表示文件访问权限。第一个字符表示文件类型，“-”表示普通文件，“d”表示目录；后三个字符是文件所有者的访问权限；再后三个字符是文件所属组中成员的访问权限，最后三个字符是其他所有人的访问权限。<em>完整含义后面讨论。</em></li>
<li><code>2</code> 表示文件硬链接数目。</li>
<li><code>root</code> 表示文件所有者用户名。</li>
<li><code>root</code> 表示文件所属用户组名字。</li>
<li><code>4096</code> 表示文件字节数大小。</li>
<li><code>Jul 9 12:06</code> 表示上次修改文件的时间和日期。</li>
<li><code>bin</code> 表示文件名。</li>
</ul>
<h4 id="3-4-确定文件类型">3.4 确定文件类型</h4>
<p>命令 <code>file</code> 可以输出文件内容的简单描述。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ file man.png</span><br><span class="line">man.png: PNG image data, 1175 x 731, 8-bit/color RGBA, non-interlaced</span><br></pre></td></tr></tbody></table></figure>
<h4 id="3-5-less浏览文件内容">3.5 less浏览文件内容</h4>
<p>命令 <code>less</code> 可以查看文本文件。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ less hello.cpp</span><br></pre></td></tr></tbody></table></figure>
<p><code>less</code> 运行起来后，如果文件内容多于一页，那么可以上下滚动文件。按下“q”键，退出 <code>less</code> 程序。下面还有一些常用的键盘命令：</p>
<table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">行为</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>PageUp</code> 或 <code>b</code></td>
<td style="text-align:center">向上翻滚一页</td>
</tr>
<tr>
<td style="text-align:center"><code>PageDown</code> 或 <code>空格</code></td>
<td style="text-align:center">向下翻滚一页</td>
</tr>
<tr>
<td style="text-align:center">上箭头</td>
<td style="text-align:center">向上翻滚一行</td>
</tr>
<tr>
<td style="text-align:center">下箭头</td>
<td style="text-align:center">向下翻滚一行</td>
</tr>
<tr>
<td style="text-align:center"><code>G</code></td>
<td style="text-align:center">移到最后一行</td>
</tr>
<tr>
<td style="text-align:center"><code>1G</code> 或 <code>g</code></td>
<td style="text-align:center">移动到开头1行</td>
</tr>
<tr>
<td style="text-align:center"><code>/字符</code></td>
<td style="text-align:center">查找指定字符串</td>
</tr>
<tr>
<td style="text-align:center"><code>n</code></td>
<td style="text-align:center">向前查找下一个出现的字符串</td>
</tr>
<tr>
<td style="text-align:center"><code>h</code></td>
<td style="text-align:center">显示帮助</td>
</tr>
</tbody>
</table>
<h4 id="3-6-符号链接和硬链接">3.6 符号链接和硬链接</h4>
<p>运行命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -l /bin/</span><br><span class="line">total 15320</span><br><span class="line">-rwxr-xr-x 1 root root 1113504 May  3  2019 bash</span><br><span class="line">...</span><br><span class="line">-rwsr-xr-x 1 root root   64424 Mar 10  2017 ping</span><br><span class="line">lrwxrwxrwx 1 root root       4 Mar 10  2017 ping4 -&gt; ping</span><br><span class="line">lrwxrwxrwx 1 root root       4 Mar 10  2017 ping6 -&gt; ping</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>
<p>可以看到，<code>ping4</code> 和 <code>ping6</code> 都有 <code>-&gt; ping</code>，其含义是符号链接（也称为软链接或者 symlink ）。在大多数“类Unix”系统中，有可能一个文件被多个文件名所指向。在这种链接下，当使用 <code>ping4</code> 时，实际上是使用 <code>ping</code>。</p>
<p>还有一种链接类型，叫做硬链接。硬链接同样允许文件有多个名字，但是硬链接以不同的方法来创建多个文件名。<em>更多见后面章节。</em></p>
<h4 id="3-7-部分目录含义">3.7 部分目录含义</h4>
<table>
<thead>
<tr>
<th style="text-align:center">目录</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>/</code></td>
<td style="text-align:center">根目录，一切起源</td>
</tr>
<tr>
<td style="text-align:center"><code>/bin</code></td>
<td style="text-align:center">包含系统启动和运行所必需的可执行二进制程序</td>
</tr>
<tr>
<td style="text-align:center"><code>/boot</code></td>
<td style="text-align:center">Linux 内核、初始 RAM 磁盘映像和启动加载程序</td>
</tr>
<tr>
<td style="text-align:center"><code>/dev</code></td>
<td style="text-align:center">设备结点目录，内核维护着所有设备的列表</td>
</tr>
<tr>
<td style="text-align:center"><code>/etc</code></td>
<td style="text-align:center">系统层面的配置文件</td>
</tr>
<tr>
<td style="text-align:center"><code>/home</code></td>
<td style="text-align:center">给每个用户在此分配家目录</td>
</tr>
<tr>
<td style="text-align:center"><code>/lib</code></td>
<td style="text-align:center">核心系统查询所使用的共享库文件，类似于 Windows 中的 DLL</td>
</tr>
<tr>
<td style="text-align:center"><code>/lost+found</code></td>
<td style="text-align:center">当部分恢复一个损坏的文件系统时会用到</td>
</tr>
<tr>
<td style="text-align:center"><code>/media</code></td>
<td style="text-align:center">可移动介质挂载的地方</td>
</tr>
<tr>
<td style="text-align:center"><code>/mnt</code></td>
<td style="text-align:center">可移动介质（存储空间）挂载的地方</td>
</tr>
<tr>
<td style="text-align:center"><code>/opt</code></td>
<td style="text-align:center">用来安装可选的软件。这个主要用来存储可能安装在系统中的商业软件产品</td>
</tr>
<tr>
<td style="text-align:center"><code>/proc</code></td>
<td style="text-align:center">由内核维护的虚拟文件系统，它所包含的文件是内核的窥视孔</td>
</tr>
<tr>
<td style="text-align:center"><code>/root</code></td>
<td style="text-align:center">超级管理员的家目录</td>
</tr>
<tr>
<td style="text-align:center"><code>/sbin</code></td>
<td style="text-align:center">包含系统二进制文件，通常为超级用户保留。</td>
</tr>
<tr>
<td style="text-align:center"><code>/tmp</code></td>
<td style="text-align:center">存储由各种程序创建的临时文件的地方</td>
</tr>
<tr>
<td style="text-align:center"><code>/usr</code></td>
<td style="text-align:center">包含普通用户所需要的所有程序和文件</td>
</tr>
<tr>
<td style="text-align:center"><code>/usr/bin</code></td>
<td style="text-align:center">包含系统安装的可执行程序</td>
</tr>
<tr>
<td style="text-align:center"><code>/usr/lib</code></td>
<td style="text-align:center">包含由 <code>/usr/bin</code> 目录中的程序所用的共享库</td>
</tr>
<tr>
<td style="text-align:center"><code>/usr/local</code></td>
<td style="text-align:center">是非系统发行版自带程序的安装目录</td>
</tr>
<tr>
<td style="text-align:center"><code>/usr/sbin</code></td>
<td style="text-align:center">包含许多系统管理程序</td>
</tr>
<tr>
<td style="text-align:center"><code>/usr/share</code></td>
<td style="text-align:center">包含许多由 <code>/usr/bin</code> 目录中的程序使用的共享数据。</td>
</tr>
<tr>
<td style="text-align:center"><code>/usr/share/doc</code></td>
<td style="text-align:center">大多数安装在系统中的软件包会包含一些文档</td>
</tr>
<tr>
<td style="text-align:center"><code>/var</code></td>
<td style="text-align:center">存放动态文件。各种数据库，假脱机文件，用户邮件等等</td>
</tr>
<tr>
<td style="text-align:center"><code>/var/log</code></td>
<td style="text-align:center">包含日志文件、各种系统活动的记录</td>
</tr>
</tbody>
</table>
<h3 id="四-操作文件和目录">四、操作文件和目录</h3>
<h4 id="4-1-通配符">4.1 通配符</h4>
<p>通配符，一些特殊字符帮助快速指定一组文件名。</p>
<table>
<thead>
<tr>
<th style="text-align:center">通配符</th>
<th style="text-align:center">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>*</code></td>
<td style="text-align:center">匹配任意多个字符（包括零个或一个）</td>
</tr>
<tr>
<td style="text-align:center"><code>?</code></td>
<td style="text-align:center">匹配任意一个字符（不包括零个）</td>
</tr>
<tr>
<td style="text-align:center"><code>[字符]</code></td>
<td style="text-align:center">匹配任意一个属于字符集中的字符</td>
</tr>
<tr>
<td style="text-align:center"><code>[!字符]</code></td>
<td style="text-align:center">匹配任意一个不是字符集中的字符</td>
</tr>
<tr>
<td style="text-align:center"><code>[[:class:]]</code></td>
<td style="text-align:center">匹配任意一个属于指定字符集类中的字符</td>
</tr>
</tbody>
</table>
<p>字符类有：</p>
<table>
<thead>
<tr>
<th style="text-align:center">字符类</th>
<th style="text-align:center">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>[:alnum:]</code></td>
<td style="text-align:center">匹配任意一个字母或数字</td>
</tr>
<tr>
<td style="text-align:center"><code>[:alpha:]</code></td>
<td style="text-align:center">匹配任意一个字母</td>
</tr>
<tr>
<td style="text-align:center"><code>[:digit:]</code></td>
<td style="text-align:center">匹配任意一个数字</td>
</tr>
<tr>
<td style="text-align:center"><code>[:lower:]</code></td>
<td style="text-align:center">匹配任意一个小写字母</td>
</tr>
<tr>
<td style="text-align:center"><code>[:upper:]</code></td>
<td style="text-align:center">匹配任意一个大写字母</td>
</tr>
</tbody>
</table>
<p>举一些例子：</p>
<ul>
<li><code>*</code>：匹配所有文件。</li>
<li><code>g*</code>：匹配文件名以“g”开头的文件。</li>
<li><code>b*.txt</code>：匹配文件名以“b”开头，中间可以有零个或任意多个字符，且以“.txt”结尾的文件。</li>
<li><code>Data???</code>：匹配以“Data”开头，其后接着3个字符的文件。</li>
<li><code>[abc]*</code>：匹配文件名以“a”或“b”或“c”开头的文件。</li>
<li><code>BACKUP.[0-9][0-9][0-9]</code>：匹配以“BACKUP.”开头，后接三个数字的文件。</li>
<li><code>[[:upper:]]*</code>：匹配以大写字母开头的文件。</li>
<li><code>*[[:lower:]123]</code>：匹配文件名以小写字母结尾，或以“1”、“2”、“3”结尾的文件。</li>
</ul>
<h4 id="4-2-创建目录">4.2 创建目录</h4>
<p>创建目录命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> directory...</span><br></pre></td></tr></tbody></table></figure>
<p>如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">mkdir</span> tests</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span></span><br><span class="line">hello.cpp  man.png  tests</span><br></pre></td></tr></tbody></table></figure>
<p>可以一次性创建多个目录。</p>
<h4 id="4-3-复制文件和目录">4.3 复制文件和目录</h4>
<p>复制文件或者目录命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> item1 item2</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>意思是复制文件或目录 <code>item1</code> 到 文件或目录 <code>item2</code>。</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> item... directory</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>意思是复制多个文件或目录到 <code>directory</code> 中。</li>
</ul>
<p><code>cp</code> 命令有一些常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>-a</code>，<code>--archive</code></td>
<td style="text-align:center">复制文件和目录，以及它们的属性，包括所有权和权限。通常副本具有用户所操作文件的默认属性</td>
</tr>
<tr>
<td style="text-align:center"><code>-i</code>，<code>--interactive</code></td>
<td style="text-align:center">重写已存在文件之前，提示用户确认。如果不指定该选项，则默认重写文件</td>
</tr>
<tr>
<td style="text-align:center"><code>-r</code> ，<code>--recursive</code></td>
<td style="text-align:center">递归复制目录以及目录中的内容</td>
</tr>
<tr>
<td style="text-align:center"><code>-u</code>，<code>--update</code></td>
<td style="text-align:center">当把文件从一个目录复制到另一个目录时，仅复制目标目录中不存在的文件，或者是文件内容新于目标目录中已经存在 的文件</td>
</tr>
<tr>
<td style="text-align:center"><code>-v</code>，<code>--verbose</code></td>
<td style="text-align:center">显示翔实的命令操作信息</td>
</tr>
</tbody>
</table>
<p>举例：</p>
<ul>
<li><code>cp file1 file2</code>：复制文件 <code>file1</code> 内容到文件 <code>file2</code>。如果 <code>file2</code> 已经存在，<code>file2</code> 的内容会被 <code>file1</code> 的内容重写。如果 <code>file2</code> 不存在，则会创建 <code>file2</code>。</li>
<li><code>cp -i file1 file2</code>：这条命令和上面的命令一样，但是如果文件 <code>file2</code> 存在的话， 在文件 <code>file2</code> 被重写之前，会提示用户确认信息。</li>
<li><code>cp file1 file2 dir1</code>：复制文件 <code>file1</code> 和文件 <code>file2</code> 到目录 <code>dir1</code>。目录 <code>dir1</code> 必须存在。</li>
<li><code>cp dir1/* dir2</code>：使用一个通配符，在目录 <code>dir1</code> 中的所有文件都被复制到目录 <code>dir2</code> 中。<code>dir2</code> 必须已经存在。</li>
<li><code>cp -r dir1 dir2</code>：复制目录 <code>dir1</code> 中的内容到目录 <code>dir2</code>。如果目录 <code>dir2</code> 不存在， 创建目录 <code>dir2</code>，操作完成后，目录 <code>dir2</code> 中的内容和 <code>dir1</code> 中 的一样。如果目录 <code>dir2</code> 存在，则目录 <code>dir1</code> （和目录中的内 容）将会被复制到 <code>dir2</code> 中。</li>
</ul>
<h4 id="4-4-移动和重命名文件">4.4 移动和重命名文件</h4>
<p><code>mv</code> 命令可以执行文件的移动和文件的命名。使用与 <code>cp</code> 命令类似：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> item1 item2</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>意思是文件或目录 <code>item1</code> 移动或重命名为 <code>item2</code>。</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> item... directory</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>意思是移动多个文件或目录到 <code>directory</code> 中。</li>
</ul>
<p><code>mv</code> 命令有一些常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>-i</code>，<code>--interactive</code></td>
<td style="text-align:center">重写已存在文件之前，提示用户确认。如果不指定该选项，则默认重写文件</td>
</tr>
<tr>
<td style="text-align:center"><code>-u</code>，<code>--update</code></td>
<td style="text-align:center">当把文件从一个目录移动到另一个目录时，仅移动目标目录中不存在的文件，或者是文件内容新于目标目录中已经存在 的文件</td>
</tr>
<tr>
<td style="text-align:center"><code>-v</code>，<code>--verbose</code></td>
<td style="text-align:center">显示翔实的命令操作信息</td>
</tr>
</tbody>
</table>
<p>举例：</p>
<ul>
<li><code>mv file1 file2</code>：移动文件 <code>file1</code> 到文件 <code>file2</code>。如果 <code>file2</code> 已经存在，<code>file2</code> 的内容会被 <code>file1</code> 的内容重写。如果 <code>file2</code> 不存在，则会创建 <code>file2</code>。之后 <code>file1</code> 不再存在。</li>
<li><code>mv -i file1 file2</code>：这条命令和上面的命令一样，但是如果文件 <code>file2</code> 存在的话， 在文件 <code>file2</code> 被重写之前，会提示用户确认信息。</li>
<li><code>mv file1 file2 dir1</code>：移动 <code>file1</code> 和 <code>file2</code> 到目录 <code>dir1</code>。目录 <code>dir1</code> 必须存在。</li>
<li><code>mv dir1 dir2</code>：如果 <code>dir2</code> 不存在则创建，并且移动目录 <code>dir1</code> 的内容到目录 <code>dir2</code> 中，同时删除目录 <code>dir1</code>。如果 <code>dir2</code> 存在，则移动 <code>dir1</code> 以及它的内容到目录 <code>dir2</code>。</li>
</ul>
<h4 id="4-5-删除文件和目录">4.5 删除文件和目录</h4>
<p>删除文件和目录：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> item..</span><br></pre></td></tr></tbody></table></figure>
<p><code>rm</code> 有一些常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:center">选项</th>
<th style="text-align:center">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>-i</code>，<code>--interactive</code></td>
<td style="text-align:center">在删除已存在文件前，提示确认信息。</td>
</tr>
<tr>
<td style="text-align:center"><code>-r，</code>–recursive`</td>
<td style="text-align:center">递归删除文件。当删除一整个目录时，需要该选项</td>
</tr>
<tr>
<td style="text-align:center"><code>-f</code>，<code>--force</code></td>
<td style="text-align:center">忽视不存在的文件，强力删除</td>
</tr>
<tr>
<td style="text-align:center"><code>-v</code>，<code>--verbose</code></td>
<td style="text-align:center">显示翔实的命令操作信息</td>
</tr>
</tbody>
</table>
<p>举例：</p>
<ul>
<li><code>rm file1</code>：删除文件 <code>file1</code>。</li>
<li><code>rm -i file1</code>：删除之前提示确定。</li>
<li><code>rm -r file dir1</code>：递归删除文件 <code>file1</code>、目录 <code>dir1</code> 以及里面的内容。</li>
<li><code>rm -rf file1 dir1</code>：强制删除文件 <code>file1</code> 和 目录 <code>dir1</code> 以及里面的内容。</li>
</ul>
<p><strong>注意：<code>rm</code> 命令一旦删除没有复原，你需要知道你删的是什么，特别是与通配符一起用的情况，很容易删完所有文件。</strong></p>
<h4 id="4-6-链接">4.6 链接</h4>
<p>硬链接时最初 Unix 创建链接的方式，每个文件默认会有一个硬链接，这个硬链接给予文件名字。每创建一个硬链接，就为一个文件创建了一个额外的目录下。硬链接的局限性如下：</p>
<ol>
<li>一个硬链接不能关联它所在文件系统之外的文件，即一个链接不能关联与链接本身不在同一个磁盘分区上的文件。</li>
<li>一个硬链接不能关联一个目录。</li>
</ol>
<p>一个硬链接和文件本身没有什么区别。当列出一个包含硬链接的目录内容时，会看到没有特殊的链接指示说明。当一个硬链接被删除时，这个链接被删除，但是文件本身的内容仍然存在（这是说，它所占的磁盘空间不会被重新分配），直到所有关联这个文件的链接都删除掉。</p>
<p>符号链接克服了硬链接的局限性。符号链接生效是通过创建一个特殊类型的文件， 这个文件包含一个关联文件或目录的文本指针。在这一方面，和 Windows 的快捷方式差不多。</p>
<p>一个符号链接指向一个文件，而且这个符号链接本身与其它的符号链接几乎没有区别。例如，如果往一个符号链接里面写入东西，那么相关联的文件也被写入。然而，当你删除一个符号链接时，只有这个链接被删除，而不是文件自身。如果先于符号链接删除文件，这个链接仍然存在，但是不指向任何东西。在这种情况下，这个链接被称为坏链接。在许多实现中，<code>ls</code> 命令会以不同的颜色展示坏链接，比如说红色，来显示它们的存在。</p>
<p><code>ln</code> 命令可以创建硬链接或者符号链接。</p>
<ul>
<li>创建硬链接：</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> file <span class="built_in">link</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>创建符号链接：</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s item <span class="built_in">link</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="4-7-实操命令">4.7 实操命令</h4>
<p>首先在家目录中创建一个 <code>playground</code> 目录：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">mkdir</span> playground</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span></span><br><span class="line">playground</span><br></pre></td></tr></tbody></table></figure>
<p>进入 <code>playground</code> 目录，同时创建两个子目录：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">mkdir</span> dir1 dir2</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">dir1  dir2</span><br></pre></td></tr></tbody></table></figure>
<p>复制一些数据到 <code>playground</code> 中：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">cp</span> /etc/passwd .</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">dir1  dir2  passwd</span><br></pre></td></tr></tbody></table></figure>
<p>尝试一下 <code>cp</code> 的选项：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">cp</span> -iv /etc/passwd .</span><br><span class="line"><span class="built_in">cp</span>: overwrite <span class="string">'./passwd'</span>? y</span><br><span class="line"><span class="string">'/etc/passwd'</span> -&gt; <span class="string">'./passwd'</span></span><br></pre></td></tr></tbody></table></figure>
<p>感受一下 <code>mv</code> 文件移动，尝试理解下面的操作：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">dir1  dir2  passwd</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">mv</span> passwd dir1/</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> dir1</span><br><span class="line">passwd</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">cd</span> dir1</span><br><span class="line">fingsinz@FingsinzStudio:~/playground/dir1$ <span class="built_in">mv</span> -v passwd ../dir2/</span><br><span class="line">renamed <span class="string">'passwd'</span> -&gt; <span class="string">'../dir2/passwd'</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground/dir1$ <span class="built_in">ls</span> ../dir2</span><br><span class="line">passwd</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">rm</span> -r dir2</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">dir1</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">mv</span> dir1/passwd  dir2</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">dir1  dir2</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> dir2</span><br><span class="line">dir2</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> dir1</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> dir1/</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>注意17行处，此时的 <code>dir2</code> 是一个文件，是 passwd 文件改名后，并不是一个目录。</li>
</ul>
<p>好的现在恢复原样：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">dir1  dir2</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">mv</span> dir2 passwd</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">mkdir</span> dir2</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">dir1  dir2  passwd</span><br></pre></td></tr></tbody></table></figure>
<p>再试试创建硬链接：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ln</span> passwd <span class="built_in">test</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ln</span> passwd dir1/test</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ln</span> passwd dir2/test</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> -l . dir1 dir2</span><br><span class="line">.:</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x 2 fingsinz fingsinz 4096 Jul 10 14:04 dir1</span><br><span class="line">drwxr-xr-x 2 fingsinz fingsinz 4096 Jul 10 14:04 dir2</span><br><span class="line">-rw-r--r-- 4 fingsinz fingsinz 1562 Jul 10 13:51 passwd</span><br><span class="line">-rw-r--r-- 4 fingsinz fingsinz 1562 Jul 10 13:51 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">dir1:</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 4 fingsinz fingsinz 1562 Jul 10 13:51 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">dir2:</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 4 fingsinz fingsinz 1562 Jul 10 13:51 <span class="built_in">test</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>可以看到 <code>passwd</code> 和 <code>test</code> 文件的硬链接数目都是 4。文件至少有一个硬链接，因为文件名就是由链接创建的。</li>
</ul>
<p>通过 <code>ls -li</code> 展示文件索引节点信息：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> -li . dir1 dir2</span><br><span class="line">.:</span><br><span class="line">total 16</span><br><span class="line">2261 drwxr-xr-x 2 fingsinz fingsinz 4096 Jul 10 14:04 dir1</span><br><span class="line">2285 drwxr-xr-x 2 fingsinz fingsinz 4096 Jul 10 14:04 dir2</span><br><span class="line">2307 -rw-r--r-- 4 fingsinz fingsinz 1562 Jul 10 13:51 passwd</span><br><span class="line">2307 -rw-r--r-- 4 fingsinz fingsinz 1562 Jul 10 13:51 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">dir1:</span><br><span class="line">total 4</span><br><span class="line">2307 -rw-r--r-- 4 fingsinz fingsinz 1562 Jul 10 13:51 <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">dir2:</span><br><span class="line">total 4</span><br><span class="line">2307 -rw-r--r-- 4 fingsinz fingsinz 1562 Jul 10 13:51 <span class="built_in">test</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>可知所有的 <code>test</code> 和 <code>passwd</code> 的索引号都是一样的，这就证实这些文件是同一个文件。</li>
</ul>
<p>先把之前的硬链接简单删掉，然后创建符号链接玩玩：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">rm</span> <span class="built_in">test</span> dir1/test dir2/test</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ln</span> -s passwd <span class="built_in">test</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ln</span> -s passwd dir1/test</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> -li . dir1</span><br><span class="line">.:</span><br><span class="line">total 12</span><br><span class="line">2261 drwxr-xr-x 2 fingsinz fingsinz 4096 Jul 10 14:13 dir1</span><br><span class="line">2285 drwxr-xr-x 2 fingsinz fingsinz 4096 Jul 10 14:12 dir2</span><br><span class="line">2307 -rw-r--r-- 1 fingsinz fingsinz 1562 Jul 10 13:51 passwd</span><br><span class="line">2364 lrwxrwxrwx 1 fingsinz fingsinz    6 Jul 10 14:13 <span class="built_in">test</span> -&gt; passwd</span><br><span class="line"></span><br><span class="line">dir1:</span><br><span class="line">total 0</span><br><span class="line">2366 lrwxrwxrwx 1 fingsinz fingsinz 6 Jul 10 14:13 <span class="built_in">test</span> -&gt; passwd</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>需要注意，此处第14行的 <code>test</code> 应该是红色名字的，这表示是一个坏链接，找不到文件 <code>passwd</code>。</li>
</ul>
<p>删掉这个坏链接，然后进入到 <code>dir1</code> 目录重新建立符号链接：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground/dir1$ <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground/dir1$ <span class="built_in">rm</span> <span class="built_in">test</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground/dir1$ <span class="built_in">ln</span> -s ../passwd <span class="built_in">test</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground/dir1$ <span class="built_in">ls</span> -li</span><br><span class="line">total 0</span><br><span class="line">2366 lrwxrwxrwx 1 fingsinz fingsinz 9 Jul 10 14:17 <span class="built_in">test</span> -&gt; ../passwd</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>此时第7行的链接应该不是红色的了，是有效链接。</li>
<li>符号链接的文件索引并不一样，但是 <code>ls</code> 命令会提示链接的是什么。</li>
</ul>
<p>建立符号链接时应当注意目录，符号链接的目录是目标文件的相对目录。建立符号链接时，可以使用绝对路径名，这样万无一失。</p>
<p>最后，删掉 <code>playground/passwd</code>，观察链接情况：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">dir1  dir2  passwd  <span class="built_in">test</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">rm</span> passwd</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> -li . dir1</span><br><span class="line">.:</span><br><span class="line">total 8</span><br><span class="line">2261 drwxr-xr-x 2 fingsinz fingsinz 4096 Jul 10 14:17 dir1</span><br><span class="line">2285 drwxr-xr-x 2 fingsinz fingsinz 4096 Jul 10 14:19 dir2</span><br><span class="line">2364 lrwxrwxrwx 1 fingsinz fingsinz    6 Jul 10 14:13 <span class="built_in">test</span> -&gt; passwd</span><br><span class="line"></span><br><span class="line">dir1:</span><br><span class="line">total 0</span><br><span class="line">2366 lrwxrwxrwx 1 fingsinz fingsinz 9 Jul 10 14:17 <span class="built_in">test</span> -&gt; ../passwd</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>此时所有的链接都已失效，名字呈红色。</li>
</ul>
<p>最后的最后，恢复现场，把 <code>playground</code> 一并删了，记得 <code>-r</code> 递归：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">cd</span> ..</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">rm</span> -r playground/</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -li</span><br><span class="line">total 0</span><br></pre></td></tr></tbody></table></figure>
<h3 id="五-使用命令">五、使用命令</h3>
<p>命令可以是：</p>
<ol>
<li>一个可执行程序，是诸如 C 和 C++ 语言写成的程序编译的二进制文件，也可以是由诸如 shell，perl， python，ruby 等等脚本语言写成的程序。</li>
<li>一个 shell 自身的命令。bash 支持若干命令， 例如 <code>cd</code> 命令。</li>
<li>一个 shell 函数。这些是小规模的 shell 脚本，它们混合到环境变量中。</li>
<li>一个命令别名。可以定义自己的命令，建立在其它命令之上。</li>
</ol>
<h4 id="5-1-显示命令类型">5.1 显示命令类型</h4>
<p><code>type</code> 命令是 shell 内部的命令，会显示命令的类型：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> <span class="built_in">command</span></span><br></pre></td></tr></tbody></table></figure>
<p>一些使用例子：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">type</span> <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span> is aliased to `<span class="built_in">ls</span> --color=auto<span class="string">'</span></span><br><span class="line"><span class="string">fingsinz@FingsinzStudio:~$ type cp</span></span><br><span class="line"><span class="string">cp is /bin/cp</span></span><br><span class="line"><span class="string">fingsinz@FingsinzStudio:~$ type cd</span></span><br><span class="line"><span class="string">cd is a shell builtin</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><code>shell builtin</code>：表示是 shell 自身的命令，内建于 shell 的命令。</li>
</ul>
<h4 id="5-2-显示可执行程序的位置">5.2 显示可执行程序的位置</h4>
<p>为了确定所给定的执行程序的准确位置，使用 <code>which</code> 命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> exe</span><br></pre></td></tr></tbody></table></figure>
<p>由前面可以知道，<code>/bin</code> 目录下存放的是一些二进制文件，所以可以试试：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">which</span> <span class="built_in">cp</span></span><br><span class="line">/bin/cp</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">which</span> <span class="built_in">cd</span></span><br><span class="line">fingsinz@FingsinzStudio:~$</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><code>which</code> 只能用于显示可执行程序的位置，上面操作中， <code>cd</code> 并不是一个可执行程序，故没有输出。</li>
</ul>
<h4 id="5-3-获取shell内建命令的帮助文档">5.3 获取shell内建命令的帮助文档</h4>
<p>有时候我们并不能完全记住每个命令的用法，这个时候需要查阅帮助文档。</p>
<ul>
<li><code>help</code> 命令可以获取 shell 内建命令的帮助文档。</li>
<li><code>man</code> 命令可以获取程序的帮助文档（手册）。</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">help</span> <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span>: <span class="built_in">cd</span> [-L|[-P [-e]] [-@]] [<span class="built_in">dir</span>]</span><br><span class="line">    Change ...(省略)</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cd</span> --<span class="built_in">help</span></span><br><span class="line"><span class="built_in">cd</span>: <span class="built_in">cd</span> [-L|[-P [-e]] [-@]] [<span class="built_in">dir</span>]</span><br><span class="line">    Change ...(省略)</span><br><span class="line">fingsinz@FingsinzStudio:~$ man <span class="built_in">cp</span></span><br><span class="line"><span class="comment"># 省略 man cp 的输出</span></span><br></pre></td></tr></tbody></table></figure>
<p>在大多数Linux 系统中，<code>man</code> 使用 less 工具来显示参考手册。所显示的参考手册，被分成几个章节，它们不仅仅包括用户命令，也包括系统管理员 命令、程序接口、文件格式等等：</p>
<table>
<thead>
<tr>
<th style="text-align:center">章节</th>
<th style="text-align:center">内容</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">用户命令</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">程序接口内核系统调用</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">C库函数程序接口</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">特殊文件，比如设备结点和驱动程序</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">文件格式</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">游戏娱乐</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">其他方面</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">系统管理员命令</td>
</tr>
</tbody>
</table>
<p>默认情况下，会自动匹配 <code>man</code> 的对象属于什么内容显示。但如果要查找一 种文件格式，而同时它也是一个命令名时，这种情况没有指定章节号，总是得到第一个匹配项。具体使用：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man section xxx</span><br></pre></td></tr></tbody></table></figure>
<h4 id="5-4-显示命令说明">5.4 显示命令说明</h4>
<p>手册只是参考，阅读起来很困难。使用 <code>whatis</code> 程序可以显示匹配特定关键字的手册的名字和一行命令说明：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ whatis <span class="built_in">rm</span></span><br><span class="line"><span class="built_in">rm</span> (1)               - remove files or directories</span><br><span class="line">fingsinz@FingsinzStudio:~$ whatis <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span> (1)               - list directory contents</span><br></pre></td></tr></tbody></table></figure>
<h4 id="5-5-给命令起别名">5.5 给命令起别名</h4>
<p>使用 <code>alias</code> 命令可以创建自己的命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> name=<span class="string">'string'</span></span><br></pre></td></tr></tbody></table></figure>
<p>首先，多个命令可以通过 <code>;</code> 连接在一行使用，比如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">mkdir</span> playground; <span class="built_in">cd</span> playground; <span class="built_in">ls</span> -liha; <span class="built_in">cd</span> ..; <span class="built_in">rm</span> playground -r;</span><br><span class="line">total 8.0K</span><br><span class="line"> 509 drwxr-xr-x  2 fingsinz fingsinz 4.0K Jul 18 11:20 .</span><br><span class="line">1396 drwxr-xr-x 11 fingsinz fingsinz 4.0K Jul 18 11:20 ..</span><br><span class="line">fingsinz@FingsinzStudio:~$</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>一番操作下来，创建并进入 <code>playground</code> 文件夹，然后列出目录文件，最后退出目录并删除。</li>
</ul>
<p>在起别名之前最好用 <code>type</code> 命令看看是否已经被用了：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">type</span> <span class="built_in">test</span></span><br><span class="line"><span class="built_in">test</span> is a shell <span class="built_in">builtin</span></span><br></pre></td></tr></tbody></table></figure>
<p>然后再起别名：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">alias</span> foo=<span class="string">'mkdir playground; cd playground; ls -liha; cd ..; rm playground -r;'</span></span><br><span class="line">fingsinz@FingsinzStudio:~$ foo</span><br><span class="line">total 8.0K</span><br><span class="line"> 509 drwxr-xr-x  2 fingsinz fingsinz 4.0K Jul 18 11:22 .</span><br><span class="line">1396 drwxr-xr-x 11 fingsinz fingsinz 4.0K Jul 18 11:22 ..</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">type</span> foo</span><br><span class="line">foo is aliased to `<span class="built_in">mkdir</span> playground; <span class="built_in">cd</span> playground; <span class="built_in">ls</span> -liha; <span class="built_in">cd</span> ..; <span class="built_in">rm</span> playground -r;<span class="string">'</span></span><br></pre></td></tr></tbody></table></figure>
<p>删除别名使用 <code>unalias</code> 命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">unalias</span> foo</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">type</span> foo</span><br><span class="line">-bash: <span class="built_in">type</span>: foo: not found</span><br></pre></td></tr></tbody></table></figure>
<p>在此章节介绍中，建立的别名会在 shell 会话结束时会消失。随后的章节里， 会了解怎样把自己的别名添加到文件中去，每次登录系统，这些文件会建立系统环境。</p>
<h3 id="六-重定向">六、重定向</h3>
<h4 id="6-1-标准输入-输出和错误">6.1 标准输入、输出和错误</h4>
<p>命令运行结果会输送到一个叫做<strong>标准输出</strong>的特殊文件（经常用<strong>stdout</strong>表示），而它们的状态信息则送到另 一个叫做<strong>标准错误</strong>的文件（<strong>stderr</strong>）。默认情况下，标准输出和标准错误都连接到屏幕，而不是保存到磁盘文件。除此之外，许多程序从一个叫做<strong>标准输入</strong>（<strong>stdin</strong>）的设备得到输入，默认情况下，标准输入连接到键盘。</p>
<p>I/O 重定向允许更改输出地点和输入来源。一般地，输出送到屏幕，输入来自键盘，但 是通过 I/O 重定向，可以做出改变。</p>
<h4 id="6-2-标准输出重定向">6.2 标准输出重定向</h4>
<p>重定向符 <code>&gt;</code> ，比如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> / &gt; ls-output.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -lh</span><br><span class="line">total 12K</span><br><span class="line">-rw-r--r--  1 fingsinz fingsinz  112 Jul 18 11:51 ls-output.txt</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>重定向符输出的文件如果不存在，会自动创建。</li>
</ul>
<p>再比如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> /aaaaa &gt; ls-output.txt</span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">'/aaaaa'</span>: No such file or directory</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -lh ls-output.txt</span><br><span class="line">-rw-r--r-- 1 fingsinz fingsinz 0 Jul 18 11:53 ls-output.txt</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>尝试将一个不存在的目录 <code>ls</code> 出来。</li>
<li>错误信息显示在屏幕，并没有输出到文件中，因为 <code>ls</code> 程序不把它的错误信息输送到标准输出，而是输送到标准错误。</li>
<li>每次重定向输出是，文件重视从头开始重写。</li>
</ul>
<p>这有一个技巧，简单地使用重定向符，没有命令在它之前，这会清空一个已存在文件的内容或是创建一个新的空文件：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ &gt; ls-output.txt</span><br></pre></td></tr></tbody></table></figure>
<p>如果想要追加输出，使用 <code>&gt;&gt;</code>：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -lh ls-output.txt</span><br><span class="line">-rw-r--r-- 1 fingsinz fingsinz 0 Jul 18 11:58 ls-output.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> / &gt;&gt; ls-output.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -lh ls-output.txt</span><br><span class="line">-rw-r--r-- 1 fingsinz fingsinz 112 Jul 18 11:58 ls-output.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> / &gt;&gt; ls-output.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -lh ls-output.txt</span><br><span class="line">-rw-r--r-- 1 fingsinz fingsinz 224 Jul 18 11:58 ls-output.txt</span><br></pre></td></tr></tbody></table></figure>
<h4 id="6-3-标准错误重定向">6.3 标准错误重定向</h4>
<p>文件流的标准输入、标准输出和标准错误分别对应 shell 内部的文件描述符<code>0</code>、<code>1</code>、<code>2</code>。。shell 使用件描述符提供了一种表示法来重定向文件。标准错误和文件描述符 <code>2</code> 一样：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> /aaaa 2&gt; ls-error.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -lh ls-error.txt</span><br><span class="line">-rw-r--r-- 1 fingsinz fingsinz 53 Jul 18 16:52 ls-error.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$</span><br></pre></td></tr></tbody></table></figure>
<h4 id="6-4-标准输出和错误到同一个文件">6.4 标准输出和错误到同一个文件</h4>
<p>使用 <code>&amp;&gt;</code>：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -l /aaa &amp;&gt; ls-output.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -lh ls-output.txt</span><br><span class="line">-rw-r--r-- 1 fingsinz fingsinz 52 Jul 18 16:54 ls-output.txt</span><br></pre></td></tr></tbody></table></figure>
<h4 id="6-5-处理不需要的输出">6.5 处理不需要的输出</h4>
<p>如果不需要命令的输出结果，可以重定向到 <code>/dev/null</code>。</p>
<ul>
<li><code>/dev/null</code> 是系统的一个设备，叫做位存储桶，可以接受输入且不对输入做处理。</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -l /aaa 2&gt; /dev/null</span><br></pre></td></tr></tbody></table></figure>
<h4 id="6-6-cat命令">6.6 cat命令</h4>
<p><code>cat</code> 命令可以读取一个或多个文件，然后复制到标准输出：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> [file]</span><br></pre></td></tr></tbody></table></figure>
<p>当 <code>cat</code> 的对象只有一个文件时，可以用来显示文件里面的内容：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -l /aaa 2&gt; ls-output.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cat</span> ls-output.txt</span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">'/aaa'</span>: No such file or directory</span><br></pre></td></tr></tbody></table></figure>
<p>当 <code>cat</code> 的对象有多个文件时，可以用来拼接文件：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cat</span> ls-output.txt ls-output.txt</span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">'/aaa'</span>: No such file or directory</span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">'/aaa'</span>: No such file or directory</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cat</span> ls-output.txt ls-output.txt &gt; ls-output2.txt</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cat</span> ls-output2.txt</span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">'/aaa'</span>: No such file or directory</span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">'/aaa'</span>: No such file or directory</span><br></pre></td></tr></tbody></table></figure>
<p>当 <code>cat</code> 不带参数时，它会从标准输入读入数据并输出到标准输出：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cat</span></span><br><span class="line">Hello World</span><br><span class="line">Hello World</span><br><span class="line">fingsinz@FingsinzStudio:~$</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>使用 <code>ctrl + d</code> 告诉 <code>cat</code> 从标准输入的读取结束。</li>
</ul>
<h4 id="6-7-标准输入重定向">6.7 标准输入重定向</h4>
<p>使用符号<code>&lt;</code>：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cat</span> &lt; ls-output.txt</span><br><span class="line"><span class="built_in">ls</span>: cannot access <span class="string">'/aaa'</span>: No such file or directory</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>虽然不使用 <code>&lt;</code>，单靠 <code>cat</code> 也可以完成，但是 <code>&lt;</code> 就是一个重定向标准输入符号，后面会有更好的例子。</li>
</ul>
<h4 id="6-8-管道线">6.8 管道线</h4>
<p>使用管道操作符 <code>|</code>（竖杠），可以让一个命令的标准输出通过管道送至另一个命令的标准输入：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 | command2</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>管道符前面的命令需要有标准输出，后面的命令需要接受标准输入。</li>
</ul>
<p>如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> / | less</span><br></pre></td></tr></tbody></table></figure>
<h4 id="6-9-过滤器">6.9 过滤器</h4>
<p>有可能会把几个命令放在一起组成一个管道线。 以这种方式使用的命令被称为过滤器。</p>
<p>比如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> / | <span class="built_in">sort</span> | less</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><code>sort</code> 具有排序的作用。</li>
</ul>
<h4 id="6-10-报道或忽略重复行">6.10 报道或忽略重复行</h4>
<p><code>uniq</code> 从标准输入或单个文件名参数接受数据有序列表（详情查看uniq 手册页），默认情况下，从数据列表中删除任何重复行。</p>
<ul>
<li>如果想看到重复的数据列表，让 <code>uniq</code> 命令带上 <code>-d</code> 选项。</li>
</ul>
<p>比如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">mkdir</span> playground</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">cd</span> playground/</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ &gt; a; &gt; b</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">mkdir</span> <span class="built_in">test</span></span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ &gt; <span class="built_in">test</span>/a</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> . <span class="built_in">test</span>/</span><br><span class="line">.:</span><br><span class="line">a  b  <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span>/:</span><br><span class="line">a</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> . <span class="built_in">test</span>/ | <span class="built_in">sort</span> | <span class="built_in">uniq</span> | <span class="built_in">cat</span></span><br><span class="line"></span><br><span class="line">.:</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line"><span class="built_in">test</span></span><br><span class="line"><span class="built_in">test</span>/:</span><br><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> . <span class="built_in">test</span>/ | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -d | <span class="built_in">cat</span></span><br><span class="line">a</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>先创建一个演示环境，在 <code>playground</code> 里面创建文件 <code>a</code>、<code>b</code>和文件夹 <code>test</code>，在文件夹 <code>test</code> 内创建文件 <code>a</code>。</li>
<li>使用管道符和 <code>uniq</code> 连接并重定向到 <code>cat</code> 中，输出并没有出现重复的文件 <code>a</code>。</li>
<li>第一行是空格是因为，<code>ls</code> 两个目录时中间会空一行，经过 <code>sort</code> 后排序到第一位。</li>
</ul>
<h4 id="6-11-wc命令">6.11 wc命令</h4>
<p><code>wc</code>（字计数）命令是用来显示文件所包含的行数、字数和字节数：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">wc</span> ls-output.txt</span><br><span class="line"> 1  9 52 ls-output.txt</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>输出的三个数字分别是：行数、单词数和字节数。</li>
<li><code>-l</code>  选项可以限制只输出行数。</li>
</ul>
<p>同样可以通过管道线进行统计数据：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~/playground$ <span class="built_in">ls</span> ./ <span class="built_in">test</span>/ | <span class="built_in">sort</span> | <span class="built_in">uniq</span> | <span class="built_in">wc</span> -l</span><br><span class="line">6</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>6 表示输出有6行。</li>
</ul>
<h4 id="6-12-grep命令">6.12 grep命令</h4>
<p><code>grep</code> 用来找到文件中的匹配文本：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep pattern [file...]</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>匹配的模式支持正则表达式。</li>
</ul>
<p>比如现在要从系统安装的程序中找到包含 <code>zip</code> 的文件：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> /bin /usr/bin | <span class="built_in">uniq</span> | grep zip</span><br><span class="line">bunzip2</span><br><span class="line">bzip2</span><br><span class="line">bzip2recover</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">gpg-zip</span><br><span class="line">zipdetails</span><br></pre></td></tr></tbody></table></figure>
<p><code>grep</code> 有一些方便的选项：<code>-i</code> 使得 <code>grep</code> 在执行搜索时忽略大小写（通常，搜索是大小写敏感的）；<code>-v</code> 选项会告诉 <code>grep</code> 只打印不匹配的行。</p>
<h4 id="6-13-head和tail命令">6.13 head和tail命令</h4>
<p><code>head</code> 命令可以输出文件的前几行，<code>tail</code> 命令可以输出文件的后几行。</p>
<ul>
<li>默认输出十行，可以通过 <code>-n</code> 调整打印的行数。</li>
<li>也可以用到管道线中。</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> /bin | <span class="built_in">head</span></span><br><span class="line">bash</span><br><span class="line">btrfs</span><br><span class="line">btrfs-debug-tree</span><br><span class="line">btrfs-find-root</span><br><span class="line">btrfs-image</span><br><span class="line">btrfs-map-logical</span><br><span class="line">btrfs-select-super</span><br><span class="line">btrfs-zero-log</span><br><span class="line">btrfsck</span><br><span class="line">btrfstune</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> /bin | <span class="built_in">tail</span> -n 2</span><br><span class="line">zmore</span><br><span class="line">znew</span><br></pre></td></tr></tbody></table></figure>
<p><code>tail</code> 命令的 <code>-f</code> 选项可以持续检测文件，当新内容添加后会立即出现，直至 <code>ctrl + c</code>。</p>
<h4 id="6-14-tee命令">6.14 tee命令</h4>
<p><code>tee</code> 命令制造了一个 “tee”安装到管道上。<code>tee</code> 程序从标准输入读入数据，并且同时复制数据到标准输出（允许数据继续随着管道线流动）。</p>
<p>当在某个中间处理阶段来捕捉一个管道线的内容时，这很有帮助，如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> /bin /usr/bin | <span class="built_in">sort</span> | <span class="built_in">tee</span> bin.txt | grep zip</span><br><span class="line">bunzip2</span><br><span class="line">bzip2</span><br><span class="line">bzip2recover</span><br><span class="line">gpg-zip</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">zipdetails</span><br><span class="line">fingsinz@FingsinzStudio:~$ <span class="built_in">ls</span> -lh bin.txt</span><br><span class="line">-rw-r--r-- 1 fingsinz fingsinz 14K Jul 18 18:18 bin.txt</span><br></pre></td></tr></tbody></table></figure>
<h2 id="配置文件和shell环境">配置文件和shell环境</h2>
<h2 id="常见任务和基本工具">常见任务和基本工具</h2>
<h2 id="编写-shell脚本">编写 shell脚本</h2>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script></article>
<div class="article-footer">
    <section id="license">
      <div class="header"><span>许可协议</span></div>
      <div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div>
    </section>
    

</div>

<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/2024/23/">关于C++继承中的virtual以及虚指针、虚表</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/2024/tosophomore/">给大二的你</a></div></section></div>






<footer class="page-footer footnote"><hr><div class="sitemap" style="column-count:2;"><div class="sitemap-group"><span class="fs15">博客</span><a href="/">近期发布</a><a href="/blog/categories/">分类</a><a href="/blog/tags/">标签</a><a href="/blog/archives/">归档</a></div><div class="sitemap-group"><span class="fs15">关于</span><a href="/about/me/">关于我</a><a href="/about/site/">关于博客</a></div></div><div class="text"><p>本站由 <a href="/">Fingsinz</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.33.0">Stellar 1.33.0</a> 主题创建。<br>
本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="true"><div class="widget-header dis-select"><span class="name">本文目录</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-text">引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0-shell"><span class="toc-text">学习 shell</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E4%BB%80%E4%B9%88%E6%98%AFshell"><span class="toc-text">一、什么是shell</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%88%9D%E6%AC%A1%E6%8E%A5%E8%A7%A6"><span class="toc-text">1.1 初次接触</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E7%AE%80%E5%8D%95%E5%91%BD%E4%BB%A4"><span class="toc-text">1.2 简单命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%B9%95%E5%90%8E%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="toc-text">1.3 幕后控制台</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%B8%AD%E8%B7%B3%E8%BD%AC"><span class="toc-text">二、文件系统中跳转</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E7%90%86%E8%A7%A3%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A0%91"><span class="toc-text">2.1 理解文件系统树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%9A%84%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">2.2 文件目录的相关命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E6%96%87%E4%BB%B6%E5%90%8D%E7%9A%84%E7%9B%B8%E5%85%B3%E8%A7%84%E5%88%99"><span class="toc-text">2.3 文件名的相关规则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E6%8E%A2%E7%A9%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="toc-text">三、探究操作系统</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9"><span class="toc-text">3.1 查询命令帮助</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-ls-%E7%9A%84%E4%B9%90%E8%B6%A3"><span class="toc-text">3.2 ls 的乐趣</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E7%A1%AE%E5%AE%9A%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="toc-text">3.4 确定文件类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-less%E6%B5%8F%E8%A7%88%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-text">3.5 less浏览文件内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5%E5%92%8C%E7%A1%AC%E9%93%BE%E6%8E%A5"><span class="toc-text">3.6 符号链接和硬链接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-%E9%83%A8%E5%88%86%E7%9B%AE%E5%BD%95%E5%90%AB%E4%B9%89"><span class="toc-text">3.7 部分目录含义</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95"><span class="toc-text">四、操作文件和目录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">4.1 通配符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-text">4.2 创建目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95"><span class="toc-text">4.3 复制文件和目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E7%A7%BB%E5%8A%A8%E5%92%8C%E9%87%8D%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6"><span class="toc-text">4.4 移动和重命名文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95"><span class="toc-text">4.5 删除文件和目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-%E9%93%BE%E6%8E%A5"><span class="toc-text">4.6 链接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-%E5%AE%9E%E6%93%8D%E5%91%BD%E4%BB%A4"><span class="toc-text">4.7 实操命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">五、使用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E6%98%BE%E7%A4%BA%E5%91%BD%E4%BB%A4%E7%B1%BB%E5%9E%8B"><span class="toc-text">5.1 显示命令类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E6%98%BE%E7%A4%BA%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">5.2 显示可执行程序的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E8%8E%B7%E5%8F%96shell%E5%86%85%E5%BB%BA%E5%91%BD%E4%BB%A4%E7%9A%84%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3"><span class="toc-text">5.3 获取shell内建命令的帮助文档</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-%E6%98%BE%E7%A4%BA%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E"><span class="toc-text">5.4 显示命令说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-%E7%BB%99%E5%91%BD%E4%BB%A4%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-text">5.5 给命令起别名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">六、重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF"><span class="toc-text">6.1 标准输入、输出和错误</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">6.2 标准输出重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-%E6%A0%87%E5%87%86%E9%94%99%E8%AF%AF%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">6.3 标准错误重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF%E5%88%B0%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6"><span class="toc-text">6.4 标准输出和错误到同一个文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-%E5%A4%84%E7%90%86%E4%B8%8D%E9%9C%80%E8%A6%81%E7%9A%84%E8%BE%93%E5%87%BA"><span class="toc-text">6.5 处理不需要的输出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6-cat%E5%91%BD%E4%BB%A4"><span class="toc-text">6.6 cat命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-7-%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">6.7 标准输入重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-8-%E7%AE%A1%E9%81%93%E7%BA%BF"><span class="toc-text">6.8 管道线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-9-%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">6.9 过滤器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-10-%E6%8A%A5%E9%81%93%E6%88%96%E5%BF%BD%E7%95%A5%E9%87%8D%E5%A4%8D%E8%A1%8C"><span class="toc-text">6.10 报道或忽略重复行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-11-wc%E5%91%BD%E4%BB%A4"><span class="toc-text">6.11 wc命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-12-grep%E5%91%BD%E4%BB%A4"><span class="toc-text">6.12 grep命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-13-head%E5%92%8Ctail%E5%91%BD%E4%BB%A4"><span class="toc-text">6.13 head和tail命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-14-tee%E5%91%BD%E4%BB%A4"><span class="toc-text">6.14 tee命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8Cshell%E7%8E%AF%E5%A2%83"><span class="toc-text">配置文件和shell环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7"><span class="toc-text">常见任务和基本工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E5%86%99-shell%E8%84%9A%E6%9C%AC"><span class="toc-text">编写 shell脚本</span></a></li></ol></div><div class="widget-footer"><a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Solar by 480 Design - https://creativecommons.org/licenses/by/4.0/ --><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"><path stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/><path d="M7 3.338A9.95 9.95 0 0 1 12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12c0-1.821.487-3.53 1.338-5"/></g></svg><span>回到顶部</span></a></div></widget>
</div></aside><div class='float-panel'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">


<script type="text/javascript">
  window.canonical = {"originalHost":null,"officialHosts":["localhost"],"encoded":""};
  const ctx = {
    date_suffix: {
      just: `刚刚`,
      min: `分钟前`,
      hour: `小时前`,
      day: `天前`,
    },
    root : `/`,
    tag_plugins: {
      chat: Object.assign({"api":"https://siteinfo.listentothewind.cn/api/v1"}),
    }
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"skip_search":null,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
    loading: `https://api.iconify.design/eos-icons:three-dots-loading.svg?color=%231cd0fd`,
  };
  const deps = {
    jquery: `https://gcore.jsdelivr.net/npm/jquery@3.7/dist/jquery.min.js`,
    marked: `https://gcore.jsdelivr.net/npm/marked@13.0/lib/marked.umd.min.js`,
    lazyload: `/%5Bobject%20Object%5D`
  }
  

</script>

<script type="text/javascript">
  
  function RunItem() {
    this.list = []; // 存放回调函数
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = () => {
          utils.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) => {
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index, 1);
        }
      }
    }
    // 构造一个可以run的对象
    function Item(fn, name) {
      // 函数名称
      this.name = name || fn.name;
      // run方法
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }

  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')) {
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function () {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },

    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      const maxRetry = 3;
      let retryCount = 0;

      return new Promise((resolve, reject) => {
        const load = () => {
          utils.onLoading?.(el);

          let timedOut = false;
          const timeout = setTimeout(() => {
            timedOut = true;
            console.warn('[request] 超时:', url);

            if (++retryCount >= maxRetry) {
              utils.onLoadFailure?.(el);
              onFailure?.();
              reject('请求超时');
            } else {
              setTimeout(load, 1000);
            }
          }, 5000);

          fetch(url).then(resp => {
            if (timedOut) return;
            clearTimeout(timeout);

            if (!resp.ok) throw new Error('响应失败');
            return resp;
          }).then(data => {
            if (timedOut) return;
            utils.onLoadSuccess?.(el);
            callback(data);
            resolve(data);
          }).catch(err => {
            clearTimeout(timeout);
            console.warn('[request] 错误:', err);

            if (++retryCount >= maxRetry) {
              utils.onLoadFailure?.(el);
              onFailure?.();
              reject(err);
            } else {
              setTimeout(load, 1000);
            }
          });
        };

        load();
      });
    },
    requestWithoutLoading: (url, options = {}, maxRetry = 2, timeout = 5000) => {
      return new Promise((resolve, reject) => {
        let retryCount = 0;

        const tryRequest = () => {
          let timedOut = false;
          const timer = setTimeout(() => {
            timedOut = true;
            if (++retryCount > maxRetry) reject('timeout');
            else tryRequest();
          }, timeout);

          fetch(url, options)
            .then(resp => {
              clearTimeout(timer);
              if (!resp.ok) throw new Error('bad response');
              resolve(resp);
            })
            .catch(err => {
              clearTimeout(timer);
              if (++retryCount > maxRetry) reject(err);
              else setTimeout(tryRequest, 500);
            });
        };

        tryRequest();
      });
    },
    /********************** requestAnimationFrame ********************************/
    // 1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。
    // 2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。
    requestAnimationFrame: (fn) => {
      if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
      }
      window.requestAnimationFrame(fn)
    },
    dark: {},
  };

  // utils.dark.mode 当前模式 dark or light
  // utils.dark.toggle() 暗黑模式触发器
  // utils.dark.push(callBack[,"callBackName"]) 传入触发器回调函数
  utils.dark.method = {
    toggle: new RunItem(),
  };
  utils.dark = Object.assign(utils.dark, {
    push: utils.dark.method.toggle.push,
  });
</script>
<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>

<script async src="https://gcore.jsdelivr.net/npm/vanilla-lazyload@19.1/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
    callback_loaded: (el) => {
      el.classList.add('loaded');
      const wrapper = el.closest('.lazy-box');
      const icon = wrapper?.querySelector('.lazy-icon');
      if (icon) icon.remove();
    }
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });

  window.wrapLazyloadImages = (container) => {
    if (typeof container === 'string') {
      container = document.querySelector(container);
    }
    if (!container) return;
    
    const images = container.querySelectorAll('img');
    images.forEach((img) => {
      if (img.classList.contains('lazy')) return;

      const src = img.getAttribute('src');
      if (!src) return;

      const wrapper = document.createElement('div');
      wrapper.className = 'lazy-box';

      const newImg = img.cloneNode();
      newImg.removeAttribute('src');
      newImg.setAttribute('data-src', src);
      newImg.classList.add('lazy');

      const icon = document.createElement('div');
      icon.className = 'lazy-icon';
      if (def.loading) {
        icon.style.backgroundImage = `url("${def.loading}")`;
      }

      wrapper.appendChild(newImg);
      wrapper.appendChild(icon);

      img.replaceWith(wrapper);
    });

    // 通知 LazyLoad 更新
    if (window.lazyLoadInstance?.update) {
      window.lazyLoadInstance.update();
    }
  }
  
</script>

<!-- required -->
<script src="/js/main.js?v=1.33.0" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    // applyThemeToGiscus(theme)
  }

  // FIXME: 这会导致无法使用 preferred_color_scheme 以外的主题
  const applyThemeToGiscus = (theme) => {
    // theme = theme === 'auto' ? 'preferred_color_scheme' : theme
    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)
    utils.dark.mode = newTheme === 'auto' ? (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light") : newTheme;
    utils.dark.method.toggle.start();

    const messages = {
      light: `切换到浅色模式`,
      dark: `切换到深色模式`,
      auto: `切换到跟随系统配色`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    } else {
      utils.dark.mode = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
    }
    utils.dark.method.toggle.start();
  })()
</script>


<!-- optional -->



<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"rating":{"js":"/js/services/rating.js","api":"https://star-vote.xaox.cc/api/rating"},"vote":{"js":"/js/services/vote.js","api":"https://star-vote.xaox.cc/api/vote"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"friends_and_posts":{"js":"/js/services/friends_and_posts.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"},"voice":{"js":"/js/plugins/voice.js"},"video":{"js":"/js/plugins/video.js"},"download-file":{"js":"/js/plugins/download-file.js"},"twikoo":{"js":"/js/services/twikoo_latest_comment.js"},"waline":{"js":"/js/services/waline_latest_comment.js"},"artalk":{"js":"/js/services/artalk_latest_comment.js"},"giscus":{"js":"/js/services/giscus_latest_comment.js"},"contributors":{"edit_this_page":{"_posts/":null,"wiki/stellar/":"https://github.com/xaoxuu/hexo-theme-stellar-docs/blob/main/"},"js":"/js/services/contributors.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else if (id == 'voice') {
        ctx.voiceAudios = document.querySelectorAll('.voice>audio');
        if (ctx.voiceAudios?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            createVoiceDom(ctx.voiceAudios);
          });
        }
      } else if (id == 'video') {
        ctx.videos = document.querySelectorAll('.video>video');
        if (ctx.videos?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            videoEvents(ctx.videos);
          });
        }
      } else if (id == 'download-file') {
        ctx.files = document.querySelectorAll('.file');
        if (ctx.files?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            downloadFileEvent(ctx.files);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }

    // chat iphone time
    let phoneTimes = document.querySelectorAll('.chat .status-bar .time');

    if (phoneTimes.length > 0) {
      NowTime();
      var date = new Date();
      var sec = date.getSeconds();
      var firstAdjustInterval = setInterval(firstAdjustTime, 1000 * (60 - sec));
    }

    function firstAdjustTime() {
      NowTime();
      clearInterval(firstAdjustInterval);
      setInterval(NowTime, 1000 * 60);
    }

    function NowTime() {
      for (let i = 0; i < phoneTimes.length; ++i) {
        var timeSpan = phoneTimes[i];
        var date = new Date();
        var hour = date.getHours();
        var min = date.getMinutes();
        timeSpan.innerHTML = check(hour) + ":" + check(min);
      }
    };

    function check(val) {
      if (val < 10) {
        return ("0" + val);
      }
      return (val);
    }

    // chat quote
    const chat_quote_obverser = new IntersectionObserver((entries, observer) => {
      entries.filter((entry) => { return entry.isIntersecting }).sort((a, b) => a.intersectionRect.y !== b.intersectionRect.y ? a.intersectionRect.y - b.intersectionRect.y : a.intersectionRect.x - b.intersectionRect.x).forEach((entry, index) => {
          observer.unobserve(entry.target);
          setTimeout(() => {
            entry.target.classList.add('quote-blink');
            setTimeout(() => {
              entry.target.classList.remove('quote-blink');
            }, 1000);
          }, Math.max(100, 16) * (index + 1));
        });
    });

    var chatQuotes = document.querySelectorAll(".chat .talk .quote");
    chatQuotes.forEach((quote) => {
      quote.addEventListener('click', function () {
        var chatCellDom = document.getElementById("quote-" + quote.getAttribute("quotedCellTag"));
        if (chatCellDom) {
          var chatDiv = chatCellDom.parentElement;
          var mid = chatDiv.clientHeight / 2;
          var offsetTop = chatCellDom.offsetTop;
          if (offsetTop > mid - chatCellDom.clientHeight / 2) {
            chatDiv.scrollTo({
              top: chatCellDom.offsetTop - mid + chatCellDom.clientHeight / 2,
              behavior: "smooth"
            });
          } else {
            chatDiv.scrollTo({
              top: 0,
              behavior: "smooth"
            });
          }
          chat_quote_obverser.observe(chatCellDom);
        }
      });
    });
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://gcore.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js"></script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://gcore.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css`,
    js: `https://gcore.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js`
  };
  var selector = '[data-fancybox]:not(.error), .with-fancybox .atk-content img:not([atk-emoticon])';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const memos = document.getElementsByClassName('ds-memos');
    if (memos != undefined && memos.length > 0) {
      needFancybox = true;
    }
    const fancybox = document.getElementsByClassName('with-fancybox');
    if (fancybox != undefined && fancybox.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
