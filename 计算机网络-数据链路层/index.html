<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/favicon.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-loading-bar.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"fingsinz.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.17.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"show_result":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="计算机网络-数据链路层">
<meta property="og:type" content="article">
<meta property="og:title" content="数据链路层">
<meta property="og:url" content="https://fingsinz.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/index.html">
<meta property="og:site_name" content="Fingsinz&#39;s space">
<meta property="og:description" content="计算机网络-数据链路层">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fingsinz.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/1.jpg">
<meta property="og:image" content="https://fingsinz.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/2.jpg">
<meta property="article:published_time" content="2023-06-07T03:10:46.000Z">
<meta property="article:modified_time" content="2023-06-09T13:47:36.410Z">
<meta property="article:author" content="Fingsinz">
<meta property="article:tag" content="数据链路层">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fingsinz.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/1.jpg">


<link rel="canonical" href="https://fingsinz.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://fingsinz.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/","path":"计算机网络-数据链路层/","title":"数据链路层"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>数据链路层 | Fingsinz's space</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Fingsinz's space</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">风信梓的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-主页home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>主页Home</a></li><li class="menu-item menu-item-日常daily"><a href="/daily/" rel="section"><i class="fa fa-calendar fa-fw"></i>日常Daily</a></li><li class="menu-item menu-item-笔记notes"><a href="/notes/" rel="section"><i class="fa fa-circle-nodes fa-fw"></i>笔记Notes</a></li><li class="menu-item menu-item-好物分享share"><a href="/share/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>好物分享Share</a></li><li class="menu-item menu-item-归档archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档Archives</a></li><li class="menu-item menu-item-关于about"><a href="/about/" rel="section"><i class="fa fa-person fa-fw"></i>关于About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">使用点对点信道的数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">1.1.</span> <span class="nav-text">数据链路和帧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">1.2.</span> <span class="nav-text">三个基本问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">2.</span> <span class="nav-text">点对点协议PPP（Point-to-Point Protocol）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">2.1.</span> <span class="nav-text">PPP协议的特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">2.2.</span> <span class="nav-text">PPP协议的帧格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">2.3.</span> <span class="nav-text">PPP协议的工作状态</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">3.</span> <span class="nav-text">使用广播通信的数据链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">3.1.</span> <span class="nav-text">局域网的数据链路层</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">3.2.</span> <span class="nav-text">CSMA&#x2F;CD协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">3.3.</span> <span class="nav-text">使用集线器的星形拓扑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">3.4.</span> <span class="nav-text">以太网的信道利用率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">3.5.</span> <span class="nav-text">以太网的MAC层</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">4.</span> <span class="nav-text">扩展的以太网</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">4.1.</span> <span class="nav-text">在物理层扩展以太网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">4.2.</span> <span class="nav-text">在数据链路层扩展以太网(更常用的方法)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">4.3.</span> <span class="nav-text">虚拟局域网</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-number">5.</span> <span class="nav-text">高速以太网</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">5.1.</span> <span class="nav-text">100BASE-T以太网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">5.2.</span> <span class="nav-text">吉比特以太网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">5.3.</span> <span class="nav-text">10吉比特以太网和更快的以太网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">5.4.</span> <span class="nav-text">使用以太网进行宽带接入</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Fingsinz"
      src="/images/favicon.png">
  <p class="site-author-name" itemprop="name">Fingsinz</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:fingsinz@foxmail.com" title="E-Mail → mailto:fingsinz@foxmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://fingsinz.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="Fingsinz">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fingsinz's space">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="数据链路层 | Fingsinz's space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          数据链路层
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-07 11:10:46" itemprop="dateCreated datePublished" datetime="2023-06-07T11:10:46+08:00">2023-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-06-09 21:47:36" itemprop="dateModified" datetime="2023-06-09T21:47:36+08:00">2023-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>18k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>33 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>计算机网络-数据链路层</p>
<span id="more"></span>

<!-- toc -->

<ul>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">使用点对点信道的数据链路层</a><ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%B8%A7">数据链路和帧</a></li>
<li><a href="#%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E9%97%AE%E9%A2%98">三个基本问题</a><ul>
<li><a href="#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7">封装成帧</a></li>
<li><a href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93">透明传输</a></li>
<li><a href="#%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6">差错控制</a><ul>
<li><a href="#crc%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A0%A1%E9%AA%8Ccyclic-redundancy-check">CRC循环冗余校验（Cyclic Redundancy Check）</a><ul>
<li><a href="#crc%E7%A0%81%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%80%9D%E6%83%B3">CRC码的基本思想</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E6%9E%84%E9%80%A0">如何构造</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E6%A3%80%E9%94%99%E7%BA%A0%E9%94%99">如何检错纠错</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEppppoint-to-point-protocol">点对点协议PPP（Point-to-Point Protocol）</a><ul>
<li><a href="#ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9">PPP协议的特点</a></li>
<li><a href="#ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B8%A7%E6%A0%BC%E5%BC%8F">PPP协议的帧格式</a><ul>
<li><a href="#%E5%B8%A7%E5%90%84%E5%AD%97%E6%AE%B5%E7%9A%84%E6%84%8F%E4%B9%89">帧各字段的意义</a></li>
<li><a href="#%E5%AD%97%E8%8A%82%E5%A1%AB%E5%85%85">字节填充</a></li>
<li><a href="#%E9%9B%B6%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85">零比特填充</a></li>
</ul>
</li>
<li><a href="#ppp%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81">PPP协议的工作状态</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E9%80%9A%E4%BF%A1%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">使用广播通信的数据链路层</a><ul>
<li><a href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">局域网的数据链路层</a><ul>
<li><a href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%A0%87%E5%87%86">以太网的两个标准</a></li>
<li><a href="#%E9%80%82%E9%85%8D%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8">适配器的作用</a></li>
</ul>
</li>
<li><a href="#csmacd%E5%8D%8F%E8%AE%AE">CSMA&#x2F;CD协议</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BA%BF%E5%99%A8%E7%9A%84%E6%98%9F%E5%BD%A2%E6%8B%93%E6%89%91">使用集线器的星形拓扑</a></li>
<li><a href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87">以太网的信道利用率</a><ul>
<li><a href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%8F%82%E6%95%B0%CE%B1">以太网参数α</a></li>
<li><a href="#%E4%BF%A1%E9%81%93%E5%88%A9%E7%94%A8%E7%8E%87%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BCs_max">信道利用率的最大值$S_{max}$</a></li>
</ul>
</li>
<li><a href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84mac%E5%B1%82">以太网的MAC层</a><ul>
<li><a href="#mac%E5%B1%82%E7%9A%84%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80">MAC层的硬件地址</a><ul>
<li><a href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A3%80%E6%9F%A5mac%E5%9C%B0%E5%9D%80">适配器检查MAC地址</a></li>
</ul>
</li>
<li><a href="#mac%E5%B8%A7%E7%9A%84%E6%A0%BC%E5%BC%8F">MAC帧的格式</a><ul>
<li><a href="#%E4%BB%A5%E5%A4%AA%E7%BD%91v2%E6%A0%87%E5%87%86%E7%9A%84mac%E5%B8%A7%E6%A0%BC%E5%BC%8F">以太网V2标准的MAC帧格式</a></li>
<li><a href="#ieee8023mac-%E5%B8%A7%E6%A0%BC%E5%BC%8F">IEEE802.3MAC 帧格式</a></li>
<li><a href="#%E6%97%A0%E6%95%88mac%E5%B8%A7">无效MAC帧</a></li>
<li><a href="#%E5%B8%A7%E7%9A%84%E6%9C%80%E5%B0%8F%E9%97%B4%E9%9A%94">帧的最小间隔</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91">扩展的以太网</a><ul>
<li><a href="#%E5%9C%A8%E7%89%A9%E7%90%86%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91">在物理层扩展以太网</a></li>
<li><a href="#%E5%9C%A8%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%89%A9%E5%B1%95%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%9B%B4%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95">在数据链路层扩展以太网(更常用的方法)</a><ul>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%BD%91%E6%A1%A5">使用网桥</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA">使用以太网交换机</a><ul>
<li><a href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%8A%9F%E8%83%BD">以太网交换机的自学习功能</a></li>
<li><a href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E4%BD%BF%E7%94%A8%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE">交换机使用生成树协议</a></li>
<li><a href="#%E4%BB%8E%E6%80%BB%E7%BA%BF%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%88%B0%E6%98%9F%E5%BD%A2%E4%BB%A5%E5%A4%AA%E7%BD%91">从总线以太网到星形以太网</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91">虚拟局域网</a><ul>
<li><a href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BD%BF%E7%94%A8%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E6%A0%BC%E5%BC%8F">虚拟局域网使用的以太网帧格式</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91">高速以太网</a><ul>
<li><a href="#100base-t%E4%BB%A5%E5%A4%AA%E7%BD%91">100BASE-T以太网</a></li>
<li><a href="#%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91">吉比特以太网</a></li>
<li><a href="#10%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%92%8C%E6%9B%B4%E5%BF%AB%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91">10吉比特以太网和更快的以太网</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%A4%AA%E7%BD%91%E8%BF%9B%E8%A1%8C%E5%AE%BD%E5%B8%A6%E6%8E%A5%E5%85%A5">使用以太网进行宽带接入</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<hr>
<ul>
<li><p>数据链路层使用的信道：点对点信道；广播信道。</p>
</li>
<li><p>点对点信道：使用一对一的点对点通信方式。</p>
</li>
<li><p>广播信道：使用一对多的广播通信方式。</p>
</li>
</ul>
<h2><span id="使用点对点信道的数据链路层">使用点对点信道的数据链路层</span></h2><h3><span id="数据链路和帧">数据链路和帧</span></h3><ul>
<li>链路（link）是一条无源的点到点的物理线路段，中间没有任何其他的交换结点。</li>
</ul>
<p>一条链路只是一条通路的一个组成部分。</p>
<ul>
<li>数据链路（data link）除了物理线路外，还必须有通信协议来控制这些数据的传输。</li>
</ul>
<p>若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。</p>
<ul>
<li><p>另外的术语：物理链路和逻辑链路，逻辑链路&#x3D;物理链路+协议。</p>
</li>
<li><p>点对点信道的数据链路层的协议数据单元是帧，数据链路层传送的是帧。</p>
</li>
</ul>
<p>数据链路层像个数字管道，在这条管道上传输的数据单位是帧。</p>
<ul>
<li>点对点信道的数据链路层在进行通信时的主要步骤如下：</li>
</ul>
<ol>
<li><p>结点A的数据链路层把网络层交下来的IP数据报添加首部和尾部封装成帧。</p>
</li>
<li><p>结点A把封装好的帧发送给结点B的数据链路层。</p>
</li>
<li><p>若结点B的数据链路层收到的帧无差错，则从收到的帧中提取出IP数据报交给上面的网络层；否则丢弃这个帧。</p>
</li>
</ol>
<h3><span id="三个基本问题">三个基本问题</span></h3><h4><span id="封装成帧">封装成帧</span></h4><ul>
<li><p>封装成帧就是在一段数据的前后分别添加首部和尾部，这样构成一个帧。</p>
</li>
<li><p>首部和尾部具有许多控制信息，一个重要作用就是进行帧定界。</p>
</li>
<li><p>每一种数据链路层协议都规定了所能传送的帧的数据部分长度上限——最大传送单元MTU。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>帧开始</th>
<th>IP数据报</th>
<th>帧结束</th>
</tr>
</thead>
<tbody><tr>
<td>帧首部</td>
<td>帧的数据部分$\leq MTU$</td>
<td>帧尾部</td>
</tr>
</tbody></table>
<ul>
<li>用控制字符进行帧定界。</li>
</ul>
<p>控制字符<code>SOH</code>（Start Of Header），表示帧的首部开始。控制字符<code>EOT</code>（End of Transmission），表示帧的结束。</p>
<p>具有明确的帧定界符才是完整的帧。</p>
<h4><span id="透明传输">透明传输</span></h4><ul>
<li>透明传输：不管所传数据是什么样的比特组合，都能在链路上传输。</li>
</ul>
<p><strong>“透明”表示：某一个实际存在的事物看起来却好像不存在一样。</strong></p>
<p>由于帧的开始和结束的标记使用专门指明的控制字符，因此，所传输的数据中任何8比特的组合一定不允许和用作帧定界的控制字符的比特编码一样。否则会出现帧定界的错误。当遇到数据中碰巧出现字符“EOT”时就传不过去。数据中的“EOT”被接收端错误地解释为“传输结束”的控制字符，而在其后面的数据因找不到“SOH”被接收端当作无效帧而丢弃。</p>
<ul>
<li>解决透明传输：字节填充或字符填充。<br>发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”。而在接收端的数据链路层在把数据送往网络层之前删除这个插入的转义字符。如果转义字符也出现在数据中，那么仍在转义字符的前面插入一个转义字符。</li>
</ul>
<h4><span id="差错控制">差错控制</span></h4><ul>
<li><p>产生比特差错：1和0的变换。</p>
</li>
<li><p>误码率：传输错误的比特占所传输比特总数的比率。</p>
</li>
</ul>
<p>误码率与信噪比关系很大。</p>
<ul>
<li>循环冗余检验CRC，能够实现无比特差错传输。</li>
</ul>
<h5><span id="crc循环冗余校验cyclic-redundancy-check">CRC循环冗余校验（Cyclic Redundancy Check）</span></h5><h6><span id="crc码的基本思想">CRC码的基本思想</span></h6><ul>
<li><p>数据发送接受方约定一个“除数”（二进制）。</p>
</li>
<li><p>K个信息位和R个校验位作为“被除数”，添加校验位后需保证除法的余数为0。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">信息位</th>
<th align="center">校验位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">K位</td>
<td align="center">R位</td>
</tr>
</tbody></table>
<ul>
<li>收到数据后，进行除法检查余数是否为0。</li>
</ul>
<h6><span id="如何构造">如何构造</span></h6><ul>
<li>假设生成多项式为$G(x)&#x3D;x^3+x^2+1$，信息码为101001，求对应CRC码。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">信息位</th>
<th align="center">校验位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">K位</td>
<td align="center">R位</td>
</tr>
</tbody></table>
<ol>
<li>确定K、R以及生成多项式对应的二进制编码。</li>
</ol>
<p>由生成多项式$G(x)&#x3D;1·x^3+1·x^2+0·x+1·x^0$，得对应的二进制编码为1101。</p>
<p>$K&#x3D;信息码长度&#x3D;6$，$R&#x3D;生成多项式最高次幂&#x3D;3$，CRC位数<code>N=K+R=9</code>。</p>
<ol start="2">
<li>移位</li>
</ol>
<p>信息码左移<code>R</code>位，低位补0。</p>
<ol start="3">
<li>相除</li>
</ol>
<p>对移位后的信息码，用生成多项式进行模2除法，产生余数。</p>
<p><img src="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/1.jpg"></p>
<p>得到对应CRC码：<code>101001001</code></p>
<h6><span id="如何检错纠错">如何检错纠错</span></h6><ul>
<li><p>如发送：<code>101001001</code>记为$C_9C_8C_7C_6C_5C_4C_3C_2C_1$。</p>
</li>
<li><p>接收方：<code>101001001</code>用<code>1101</code>进行模2除，余数为<code>000</code>代表没有出错。</p>
</li>
<li><p>接收方：<code>101001011</code>用<code>1101</code>进行模2除，余数为<code>010</code>代表出错。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">接受</th>
<th align="center">余数</th>
<th align="center">出错位</th>
</tr>
</thead>
<tbody><tr>
<td align="center">10100100<font color="red">0</font></td>
<td align="center">001</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">1010010<font color="red">1</font>1</td>
<td align="center">010</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">101001<font color="red">1</font>01</td>
<td align="center">100</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">10100<font color="red">0</font>001</td>
<td align="center">101</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">1010<font color="red">1</font>1001</td>
<td align="center">111</td>
<td align="center">5</td>
</tr>
<tr>
<td align="center">101<font color="red">1</font>01001</td>
<td align="center">011</td>
<td align="center">6</td>
</tr>
<tr>
<td align="center">10<font color="red">0</font>001001</td>
<td align="center">110</td>
<td align="center">7</td>
</tr>
<tr>
<td align="center">1<font color="red">1</font>1001001</td>
<td align="center">001</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center"><font color="red">0</font>01001001</td>
<td align="center">010</td>
<td align="center">9</td>
</tr>
</tbody></table>
<ul>
<li>K个信息位，R个校验位，若生成多项式选择得当，且$2^R\geq K+R+1$，则CRC码可纠正1位错。</li>
</ul>
<p>上述例子中，总位数有9位，而校验位只有3位，$2^3&#x3D;8$，则不能表示所有的错误位置。</p>
<ul>
<li>理论上可以得出CRC校验码的特点：</li>
</ul>
<ol>
<li><p>可检测出所有奇数个错误；</p>
</li>
<li><p>可检测出所有双比特的错误；</p>
</li>
<li><p>可检测出所有小于等于校验位长度的连续错误。</p>
</li>
</ol>
<ul>
<li><p>在数据后面添加上冗余码称为帧检验序列FCS。</p>
</li>
<li><p>CRC是一种常用的检错方法，而FCS是添加在数据后面的冗余码。</p>
</li>
<li><p>仅用循环冗余检验CRC差错检测技术只能做到无差错接受。</p>
</li>
</ul>
<p>凡是接收端数据链路层接受的帧，都能以非常接近1的概率认为这些帧在传输过程中没有产生差错。</p>
<p>无比特差错和无传输差错是不同的概念。</p>
<h2><span id="点对点协议ppppoint-to-point-protocol">点对点协议PPP（Point-to-Point Protocol）</span></h2><h3><span id="ppp协议的特点">PPP协议的特点</span></h3><ul>
<li><p>用户计算机和ISP进行通信时所使用的数据链路层协议就是PPP协议。</p>
</li>
<li><p>PPP协议应该满足的需求</p>
</li>
</ul>
<ol>
<li><p>简单——首要要求。</p>
</li>
<li><p>封装成帧——必须规定特殊的字符作为帧定界符。</p>
</li>
<li><p>透明性——必须保证数据传输的透明性。</p>
</li>
<li><p>多种网络协议——能够在同一条物理链路上同时支持多种网络层协议。</p>
</li>
<li><p>多种类型网络——能够在多种类型网络上使用。</p>
</li>
<li><p>差错检测——必须能够对接收端收到的帧进行检测，并立即丢弃有差错的帧。</p>
</li>
<li><p>检测连接状态——能够即使自动检测出链路是否处于正常工作状态。</p>
</li>
<li><p>最大传送单元——必须对每一种类型的点对点链路设置最大传送单元MTU的标准默认值，促进各种实现之间的互操作性。</p>
</li>
<li><p>网络层地址协商——必须提供一种机制使通信的两个网络层实体能够通过协商知道或能够配置彼此的网络层地址。</p>
</li>
<li><p>数据压缩协商——必须提供一种方法来协商使用数据压缩算法。</p>
</li>
</ol>
<ul>
<li>PPP协议不需要的功能</li>
</ul>
<ol>
<li><p>纠错</p>
</li>
<li><p>流量控制</p>
</li>
<li><p>序号</p>
</li>
<li><p>多点线路</p>
</li>
<li><p>半双工或单工线路</p>
</li>
</ol>
<ul>
<li>PPP协议组成部分：</li>
</ul>
<ol>
<li><p>一个将IP数据报封装到串行链路的方法。</p>
</li>
<li><p>链路控制协议LCP（Link Control Protocol）。</p>
</li>
<li><p>网络控制协议NCP（Network Control Protocol）。</p>
</li>
</ol>
<h3><span id="ppp协议的帧格式">PPP协议的帧格式</span></h3><h4><span id="帧各字段的意义">帧各字段的意义</span></h4><ul>
<li><p>PPP帧首部和尾部分别为4个字段和2个字段。</p>
</li>
<li><p>首部</p>
</li>
</ul>
<p>标志字段F（Flag），规定为<code>0x7E</code>，是PPP帧的定界符，占用1个字节；</p>
<p>地址字段A，规定为<code>0xFF</code>，占用1个字节；</p>
<p>控制字段C，规定为<code>0x03</code>，占用1个字节；</p>
<p>协议占用2个字节。当协议字段为<code>0x0021</code>时，PPP帧的信息字段就是IP数据报。当协议字段为<code>0xC021</code>时，则信息字段是PPP链路控制协议LCP的数据。当协议字段为<code>0x8021</code>时，表示这是网络层的控制数据。</p>
<ul>
<li><p>信息字段的长度是可变的，不超过1500字节。</p>
</li>
<li><p>尾部第一个字段是使用CRC的帧检验序列FCS，第二个字段是标志字段F。</p>
</li>
</ul>
<h4><span id="字节填充">字节填充</span></h4><ul>
<li>当信息字段中出现和标志字段一样的比特<code>0x7E</code>组合时，就必须采取一些措施使这种形式上和标志字段一样的比特组合不出现在信息字段中。当</li>
</ul>
<p>PPP使用异步传输时，它把转义字符定义为<code>0x7D</code>即<code>01111101</code>，并使用字节填充。</p>
<ul>
<li>RFC1662规定了填充方法：</li>
</ul>
<ol>
<li><p>把信息字段中出现的每一个<code>0x7E</code>字节转变成为2字节序列<code>0x7D,0x5E</code>。</p>
</li>
<li><p>若信息字段中出现了一个<code>0x7D</code>的字节（即出现了和转义字符一样的比特组合），则把<code>0x7D</code>转变为2字节序列<code>0x7D,0x5D</code>。</p>
</li>
<li><p>若信息字段中出现了ASCII码的控制字符（数值小于<code>0x20</code>的字符），则在该字符前加入一个<code>0x7D</code>字节，同时将该字符的编码加以改变。如出现了<code>0x03</code>（在控制字符中是“传输结束”ETX）就要把它转变为2字节序列<code>0x7D,0x23</code>。<br>发送端进行了修改，但接收端在收到数据在进行于发送端字节填充相反的变换。</p>
</li>
</ol>
<h4><span id="零比特填充">零比特填充</span></h4><ul>
<li><p>零比特填充的具体做法：在发送端，先扫描整个信息字段，只要发现有5个连续1，则立即填入一个0（防止被认为是标志字段F）。接收端在收到一个帧时，先找到标志字段F以确认一个帧的边界，接着再用硬件对其中的比特流进行扫描，当发现5个连续的1时，就把这5个连续1后的一个0删除，还原成原来的信息比特流。</p>
</li>
<li><p>上述方法保证了透明传输：在所传送的数据比特流中可以传送任意组合的比特流，而不会引起对帧边界的错误判断。</p>
</li>
</ul>
<h3><span id="ppp协议的工作状态">PPP协议的工作状态</span></h3><p><img src="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/2.jpg"></p>
<ul>
<li>PPP协议有5个工作状态：</li>
</ul>
<ol>
<li><p>链路静止（Link Dead）：PPP链路的起始和终止状态永远是链路静止，这个阶段发生在链接失败，或一方被告知断开连接（例如，用户已经完成了他或她的拨号连接）。</p>
</li>
<li><p>链路建立（LCP 连接建立）（Link Establishment Phase）：发送者与接收者之间建立连接。</p>
</li>
<li><p>鉴别用户身份（身份验证）（Authentication Phase）：使用用户名和口令对建立的链接进行身份验证，确定对方的身份是否合法。</p>
</li>
<li><p>网络层协议（NCP 建立）（Network-Layer Protocol Phase）：在建立的PPP链路上，根据具体需要选择所要使用的网络层协议，并为该协议建立NCP（网络控制协议）。</p>
</li>
<li><p>链路终止（LCP连接终止）（Link Termination Phase）：链路连接的关闭及资源的释放。</p>
</li>
</ol>
<ul>
<li><p>当用户拨号接入ISP时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。PC 机向路由器发送一系列的链路控制协议 LCP 分组（封装成多个 PPP 帧)这些分组及其响应选择一些PPP参数，并进行网络层配置，网络控制程序NCP 给新接入的PC机分配一个临时的IP地址，使PC机成为因特网上的一个主机。通信完毕时，NCP释放网络层连接，收回原来分配出去的IP地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。</p>
</li>
<li><p>PPP协议不是纯粹的数据链路层的协议，还包括物理层和网络层的内容。</p>
</li>
<li><p>当用户个人电脑通过调制解调器呼叫路由器时，路由器就能够检测到调制解调器发出的载波信号。在双方建立了物理层连接后，PPP就进入“链路建立”（Link Establish）状态，其目的是建立链路层的LCP连接。这时LCP开始协商一些配置选项，即发送LCP的配置请求帧（Configure-Request）。这是个 PPP帧，其协议字段置为 LCP 对应的代码，而信息字段包含特定的配置请求。</p>
</li>
<li><p>链路的另一端可以发送以下几种响应中的一种：</p>
</li>
</ul>
<ol>
<li><p>配置确认帧（Configure-Ack）所有选项都接受。</p>
</li>
<li><p>配置否认帧（Configure-Nak）所有选项都理解但不能接受。</p>
</li>
<li><p>配置拒绝帧（Configure-Reject）选项有的无法识别或不能接受，需要协商。</p>
</li>
</ol>
<ul>
<li><p>LCP配置选项包括链路上的最大帧长、所使用的<strong>鉴别协议</strong>（authentication protocol）的规约（如果有的话），以及不使用PPP帧中的地址和控制字段（因为这两个字段的值是固定的，没有任何信息量，可以在PPP帧的首部中省略这两个字节）。协商结束后双方就建立了 LCP链路，接着就进入“<strong>鉴别</strong>”（Authenticate）状态。在这一状态，只允许传送LCP协议的分组、鉴别协议的分组以及监测链路质量的分组。若使用口令鉴别协议PAP（Password Authentication Protocol），则需要发起通信的一方发送身份标识符和口令。系统可允许用户重试若干次。如果需要有更好的安全性，则可使用更加复杂的口令握手鉴别协议 CHAP <strong>（Challenge-Handshake Authentication Protocol）。若鉴别身份失败，则转到“</strong>链路终止<strong>”（Link Terminate）状态。若鉴别成功，则进入“</strong>网络层协议**”（Network-Layer Protocol）状态。</p>
</li>
<li><p>在“<strong>网络层协议</strong>”状态，PPP链路的两端的网络控制协议NCP根据网络层的不同协议互相交换网络层特定的网络控制分组。这个步骤是很重要的，因为现在的路由器都能够同时支持多种网络层协议。总之，PPP协议两端的网络层可以运行不同的网络层协议，但仍然可使用同一个PPP协议进行通信。</p>
</li>
<li><p>如果在PPP链路上运行的是IP协议，则对PPP链路的每一端配置IP协议模块（如分配 IP 地址）时就要使用 NCP 中支持 IP的协议——<strong>IP 控制协议 IPCP</strong> （IP Control Protocol）。IPCP 分组也封装成PPP帧（其中的协议字段为<code>0x8021</code>）在PPP链路上传送。在低速链路上运行时，双方还可以协商使用压缩的TCP和IP首部，以减少在链路上发送的比特数。</p>
</li>
<li><p>当网络层配置完毕后，链路就进入可进行数据通信的“<strong>链路打开</strong>”（Link Open）状态。链路的两个 PPP端点可以彼此向对方发送分组。两个 PPP端点还可发送<strong>回送请求</strong>LCP分组（Echo-Request）和<strong>回送回答</strong>LCP分组（Echo-Reply），以检查链路的状态。</p>
</li>
<li><p>数据传输结束后，可以由链路的一端发出终止请求LCP分组（Terminate-Request）请求终止链路连接，在收到对方发来的终止确认 LCP 分组（Terminate-Ack）后，转到“<strong>链路终止</strong>”状态。如果链路出现故障，也会从“<strong>链路打开</strong>”状态转到“<strong>链路终止</strong>”状态。当调制解调器的载波停止后，则回到“<strong>链路静止</strong>”的状态。</p>
</li>
</ul>
<h2><span id="使用广播通信的数据链路层">使用广播通信的数据链路层</span></h2><h3><span id="局域网的数据链路层">局域网的数据链路层</span></h3><ul>
<li><p>特点：网络为一个单位所拥有；地理范围和站点数目有限。</p>
</li>
<li><p>局域网具有如下主要优点：</p>
</li>
</ul>
<ol>
<li><p>具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。</p>
</li>
<li><p>便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。</p>
</li>
<li><p>提高了系统的可靠性、可用性和残存性。</p>
</li>
</ol>
<ul>
<li>共享信道：静态划分信道和动态媒体接入控制。</li>
</ul>
<p>静态划分信道包括频分复用、时分复用、波分复用和码分复用灯，但代价较高不适合局域网使用。动态媒体接入控制又称多点接入，特点是信道并非在用户通信时固定分配给用户。</p>
<ul>
<li>动态媒体接入又分为随机接入和受控接入。</li>
</ul>
<p>随机接入的特点是所有用户可随机地发送信息，但如果恰巧多用户同时发送信息时，出现信息碰撞冲突，所以要有解决碰撞的网络协议。受控接入的特点是用户不能随机地发送信息而必须服从一定的控制，这类典型代表有分散控制的令牌环局域网和集中控制的多点线路探询（又称轮询）。</p>
<h4><span id="以太网的两个标准">以太网的两个标准</span></h4><ul>
<li><p>以太网的两个标准：DIX Ethernet V2和IEEE 802.3。</p>
</li>
<li><p>IEEE802委员会把局域网的数据链路层拆成两个子层：逻辑链路控制LLC（Logical Link Control）和媒体接入控制MAC（Medium Access Control）。与接入到传输媒体有关的内容都放在MAC子层，而LLC子层则与传输媒体无关，不管采用何种传输媒体和MAC子层的局域网对LLC子层来说都是透明的。</p>
</li>
</ul>
<h4><span id="适配器的作用">适配器的作用</span></h4><ul>
<li><p>计算机与外界局域网的连接时通过通信适配器（adapter）进行的。</p>
</li>
<li><p>适配器本来是一块网络接口板，又称为通信适配器或网络接口卡NIC，或“网卡”。</p>
</li>
<li><p>重要功能：串行&#x2F;并行转换；数据缓存；安装设备驱动程序；实现以太网协议。</p>
</li>
</ul>
<h3><span id="csmax2fcd协议">CSMA&#x2F;CD协议</span></h3><ul>
<li>以太网采用广播方式发送。</li>
</ul>
<p>总线上的每一个工作的计算机都能检测到发送的数据信号。但由于数据帧首部写入地址匹配问题，只有某个计算机才能接收。</p>
<ul>
<li>以太网采用两种重要措施</li>
</ul>
<ol>
<li>采用较为灵活的无连接的工作方式。</li>
</ol>
<p>不必先建立连接就可以直接发送数据。对发送的数据帧不进行编号，也不要求对方发回确认。</p>
<p>以太网提供的服务时不可靠的交付，即尽最大努力的交互。</p>
<p>当目的站收到有差错的数据帧时就丢弃此帧，其他什么也不做。差错的纠正由高层来决定。</p>
<p>如果发现了数据帧丢失了一些数据，于是把这些数据重新传递给以太网进行重传，但以太网并不知道这是重传帧，而是当作新的数据帧来发送。</p>
<ol start="2">
<li>以太网发送的数据都是用曼彻斯特编码。</li>
</ol>
<p>曼彻斯特编码的缺点是：它所占的频带宽度比原始的基带信号增加了一倍。</p>
<ul>
<li><p>CSMA&#x2F;CD含义： 载波监听多点接入&#x2F;碰撞检测（Carrier Sense Multiple Access with Collision Detection）。</p>
</li>
<li><p>“多点接入”表示许多计算机以多点接入的方式连接在一根总线上。</p>
</li>
<li><p>“载波监听”是指每一个站在发送数据之前先要检测总线上是否有其他计算机在发送数据，如果有，则暂时不发送数据，以免发生碰撞。</p>
</li>
</ul>
<p>总线上并没有什么“载波”。因此，“载波监听”就是用电子技术检测总线上有没有其他计算机发送的数据信号。</p>
<ul>
<li>“碰撞检测”就是计算机边发送数据边检测信道上的信号电压大小。“碰撞检测”也成为“冲突检测”。</li>
</ul>
<p>当几个站同时在总线上发送数据时，总线上的信号电压摆动值将增大。当适配器检测到的信号电压变化幅度超过一定的门限值，就认为总线上至少有两个站同时在发送数据。</p>
<ul>
<li><p>为什么要进行碰撞检测？<br>由于电磁波在总线上的传播速率是有限的。 碰撞的结果是两个帧都变得无用。</p>
</li>
<li><p>使用CSMA&#x2F;CD协议的以太网不能进行全双工通信而只能进行双向交替通信（半双工通信）。每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率。</p>
</li>
<li><p>争用期</p>
</li>
</ul>
<p>最先发送数据帧的站，在发送数据帧后至多经过时间$2τ$就可知道发送的数据帧是否遭受了碰撞。以太网的端到端往返时延$2τ$称为争用期或碰撞窗口。经过争用期后还没有检测到碰撞，才能肯定此次发送不会发生碰撞。</p>
<p>10Mbit&#x2F;s以太网取51.2μs为争用期长度。对于10Mbit&#x2F;s以太网，在争用期可发送512bit，即64字节。这意味着以太网在发送数据时，若前64字节没有发送冲突，则后续的数据就不会发送冲突。</p>
<p>如果发生冲突，一定在发送前64字节之内。由于冲突而终止发送，此时发送出去的数据一定小于64字节。<strong>以太网规定了最短有效帧长为64字节</strong>，凡长度小于64字节的帧都是由于冲突而异常终止的无效帧。</p>
<ul>
<li>最短帧长计算</li>
</ul>
<p>$$<br>最短帧长 &#x3D; 争用期长度 × 数据传输速率<br>$$</p>
<p>$$<br>争用期长度是指端到端传输时延 τ 的两倍。<br>$$</p>
<p>$$<br>最短帧长 &#x3D; 2τ × 数据传输速率<br>$$</p>
<ul>
<li>二进制指数类型退避算法</li>
</ul>
<p>发送碰撞的站在停止发送数据后，要推迟（退避）一个随机时间才能在发送数据。基本退避时间取为争用期$2τ$。从整数集合$[0,1,…,(2^k-1)]$中随机取出一个数，记为$r$。重传所需时延就是$r$倍的基本退避时间。</p>
<p>参数$k$计算：$k&#x3D;Min[重传次数,10]$，当$k\leq 10$时，参数$k$等于重传次数。</p>
<p>当重传达16次仍不能成功时丢弃此帧，并向高层报告。</p>
<ul>
<li>强化碰撞</li>
</ul>
<p>一旦发生了碰撞：立即停止发送数据；再继续发送32比特或48比特的人为干扰信号。</p>
<ul>
<li>CSMA&#x2F;CD协议的要点</li>
</ul>
<ol>
<li><p>准备发送。在发送之前，必须先检测信道。</p>
</li>
<li><p>检测信道。若检测到信道忙，应不停检测，一直等待信道转为空闲。若检测到信道空闲，并在96比特时间内保持空闲（保证了帧间最小间隔），就发送这个帧。</p>
</li>
<li><p>检查碰撞。在发送过程中仍不停地检测信道，即网络适配器要边发送边监听。这里有两种可能性。</p>
</li>
</ol>
<p>发送成功：在争用期内一直未检测到碰撞。这个帧肯定能够发送成功。发送完毕后，其他什么也不做，回到步骤1。</p>
<p>发送失败：在争用期内检测到碰撞。这是立即停止发送数据，并按规定发送人为干扰信号。适配器接着就执行指数退避算法。等待r倍512比特时间后，返回到步骤2，继续检测信道。但若重传达16次仍不成功，则停止重传而向上报错。</p>
<h3><span id="使用集线器的星形拓扑">使用集线器的星形拓扑</span></h3><ul>
<li>物理上是星型，逻辑上是总线型。</li>
</ul>
<p>为了降低成本，最初由粗的同轴电缆变成细的同轴电缆最后变成无屏蔽双绞线。每个站需要用两对双绞线，分别用于发送和接收；</p>
<ul>
<li><p>采用双绞线的以太网采用星形拓扑，在星形中心则增加了一种可靠性非常高的设备，叫作集线器（hub）。</p>
</li>
<li><p>1990年，IEEE制定星形以太网10BASE-T的标准802.3i。10表示速度10Mbit&#x2F;s，BASE指的是连接线上的信号是基带信号，T代表双绞线。</p>
</li>
</ul>
<p>使用无屏蔽双绞线，采用星形拓扑。每个站需要两队双绞线用于发送和接收。双绞线两端使用RJ-45插头。</p>
<ul>
<li>集线器的一些特点</li>
</ul>
<p>逻辑上仍是一个总线网，各工作站使用的还是CSMA&#x2F;CD协议，并共享逻辑上的总线，在同一时刻至多只允许一个站发送数据。</p>
<ol>
<li><p>能够扩展网络：集线器可以将多个网络设备连接在一起，扩展网络的范围和接入设备的数量。</p>
</li>
<li><p>传输速率较慢：集线器的传输速率较慢，一般为10Mbps或100Mbps，无法满足高速数据传输的需求。</p>
</li>
<li><p>无法分割网络：集线器不具备分割网络的能力，所有连接的设备共享同一个网络地址。</p>
</li>
<li><p>无法过滤数据：集线器无法过滤数据包，所有的数据包都会被广播到所有连接的设备上。</p>
</li>
<li><p>便宜易用：集线器的价格较为低廉，且使用简单，适合小型网络的搭建。</p>
</li>
<li><p>可靠性较低：由于集线器无法检测网络中的故障点，不进行碰撞检测，一旦出现故障，整个网络将会受到影响。</p>
</li>
</ol>
<h3><span id="以太网的信道利用率">以太网的信道利用率</span></h3><ul>
<li>以太网的信道利用率是指在一定时间内，实际传输数据的时间与总时间的比值。</li>
</ul>
<p>由于在以太网中，传输数据需要占用一定的时间，而且在传输数据时可能会出现冲突、重传等情况，因此实际传输数据的时间会比总时间要短，信道利用率也就相应地降低。</p>
<ul>
<li><p>以太网总的信道利用率并不能达到100%。</p>
</li>
<li><p>假设发送帧需要的时间是$T_0$，则成功发送一个帧需要占用信道的时间是$T_0+τ$，多一个单程端到端时延$τ$。因此必须经过时间$T_0+τ$后以太网的媒体才完全进入空闲状态，才能允许其他站发送数据。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">争用期</th>
<th align="center">争用期</th>
<th align="center">……</th>
<th align="center">争用期</th>
<th align="center">发送成功</th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center">$2τ$</td>
<td align="center">$2τ$</td>
<td align="center"></td>
<td align="center">$2τ$</td>
<td align="center">$T_0$</td>
<td align="center">$τ$</td>
</tr>
</tbody></table>
<p>前面争用期时间为发生碰撞的情况，后面从发送成功到一个$τ$时间为占用信道时间。</p>
<h4><span id="以太网参数α">以太网参数α</span></h4><ul>
<li><p>定义参数$α$，以太网单程端到端时延$τ$与帧发送时间$T_0$之比，$α&#x3D;\frac t {T_0}$。当$α\rightarrow 0$，表示一发生碰撞就立即可以检测出来，并立即停止发送，因而信道利用率很高。$α$越大，表明争用期所占的比例增大，每发生一次碰撞浪费许多信道资源，使得信道利用率明显降低。</p>
</li>
<li><p>从式子可得当数据率一定时，以太网的连线的长度受到限制，同时以太网的帧长不能太短。</p>
</li>
</ul>
<h4><span id="信道利用率的最大值s_max">信道利用率的最大值$S_{max}$</span></h4><ul>
<li>使用非常理想化的考虑，计算极限信道利用率：</li>
</ul>
<p>$$<br>S_{max}&#x3D;\frac {T_0}{T_0+τ}&#x3D;\frac 1 {1+a}<br>$$</p>
<p>只有参数$α$远小于1才能得到尽可能高的极限信道利用率。若参数$α$远大于1，则极限信道利用率就远小于1，而此时实际的信道利用率就更小。当以太网的利用率达到30%时就已经处于重载的情况。</p>
<h3><span id="以太网的mac层">以太网的MAC层</span></h3><h4><span id="mac层的硬件地址">MAC层的硬件地址</span></h4><ul>
<li>MAC地址（Media Access Control Address），又称硬件地址或物理地址，是用于唯一标识网络设备的地址。在计算机网络中，MAC地址是以太网协议中的一个重要参数，用于识别数据包发送者和接收者。</li>
</ul>
<p>MAC地址，实际上就是适配器地址或适配器标识符EUI-48。</p>
<p>802标准所说的“地址”严格说应该是每一个站的“名字”或标识符。</p>
<ul>
<li>MAC地址由48位二进制数表示，通常被表示为12个十六进制数，每两个十六进制数之间用冒号或短横线隔开。MAC地址由两部分组成：厂商代码和设备标识符。</li>
</ul>
<p>厂商代码是由IEEE（Institute of Electrical and Electronics Engineers）注册管理机构分配的，占用24位二进制数。设备标识符是由厂商自己分配的，占用24位二进制数。</p>
<p>IEEE规定地址字段的第一字节最低位为I&#x2F;G位。I&#x2F;G表示Individual&#x2F;Group。当I&#x2F;G位&#x3D;0，地址字段表示一个单站地址；当I&#x2F;G位&#x3D;1，地址字段表示一个组地址。所有48位都为1，地址字段是广播地址。</p>
<p>IEEE规定地址字段的第一字节最低位为G&#x2F;L位。G&#x2F;L表示Global&#x2F;Local。当G&#x2F;L位&#x3D;0，是全球管理（保证在全球没有相同的地址），厂商向IEEE购买的OUI都属于全球管理。当G&#x2F;L位&#x3D;1，是本地管理，这时用户可任意分配网络上的地址。</p>
<ul>
<li>MAC地址是<strong>唯一</strong>的，每个网络设备都会被分配一个唯一的MAC地址。MAC地址通常被写在设备的网卡上，由网卡芯片固化在硬件中。在以太网中，MAC地址被用于识别数据包发送者和接收者。</li>
</ul>
<p>当一个数据包从源设备发送到目的设备时，数据包中会包含源MAC地址和目的MAC地址。网络设备通过比对数据包中的目的MAC地址和自己的MAC地址，来判断是否接收该数据包。如果目的MAC地址与设备的MAC地址相同，设备就会接收该数据包并进行处理，否则就会忽略该数据包。<br>总之，MAC地址是网络设备的一个重要标识，它是由网络设备的物理硬件决定的，一般情况下不会改变。它在网络通信中起到了重要的作用。</p>
<h5><span id="适配器检查mac地址">适配器检查MAC地址</span></h5><ul>
<li><p>适配器（Network Adapter）是计算机中用于连接计算机与网络之间的设备，也称为网卡（Network Interface Card）。在计算机网络中，适配器通常用于接收和发送网络数据包。</p>
</li>
<li><p>适配器通常具有一个硬件地址，也称为MAC地址。检查MAC地址是指在数据包到达适配器时，适配器会首先检查数据包中的目的MAC地址是否与自己的MAC地址相同。</p>
</li>
</ul>
<p>相同，接收该数据包并将其传递给计算机进行处理。</p>
<p>不同，忽略该数据包。</p>
<ul>
<li><p>“发往本站的帧”包括：单播帧（一对一，即收到的帧的MAC地址与本站硬件地址相同）、广播帧（一对全体，即发送给本局域网上所有站点的帧，全1地址）和多播帧（一对多，即发送给本局域网一部分站点的帧）。</p>
</li>
<li><p>所有的适配器都至少能够识别前两种帧，即能识别单播地址和广播地址。</p>
</li>
<li><p>只有目的地址才能使用广播地址和多播地址。</p>
</li>
</ul>
<h4><span id="mac帧的格式">MAC帧的格式</span></h4><ul>
<li>常用的以太网MAC帧格式有两种标准：DIX Ethernet V2标准（以太网V2标准）和IEEE的802.3标准。</li>
</ul>
<h5><span id="以太网v2标准的mac帧格式">以太网V2标准的MAC帧格式</span></h5><p>以太网的帧最短是64字节，而现在目的地址，原地址，类型和FCS占了18字节，所以IP数据报有效数据最小是46字节。</p>
<table>
<thead>
<tr>
<th align="center">前同步码</th>
<th align="center">SFD</th>
<th align="center">目的地址</th>
<th align="center">源地址</th>
<th align="center">类型</th>
<th align="center">数据（IP数据报）</th>
<th align="center">FCS</th>
</tr>
</thead>
<tbody><tr>
<td align="center">7byte</td>
<td align="center">1byte</td>
<td align="center">6byte</td>
<td align="center">6byte</td>
<td align="center">2byte</td>
<td align="center">46~1500byte</td>
<td align="center">4byte</td>
</tr>
</tbody></table>
<p>从目的地址到FCS为一个以太网MAC帧。</p>
<ol>
<li><p>前导码（前同步码）（Preamble）：7个字节的前导码，用于标识一个数据帧的开始，具体内容为1010……1010。</p>
</li>
<li><p>帧起始定界符（Start Frame Delimiter，SFD）：1个字节的帧起始定界符，用于标识前导码的结束，内容为10101011。</p>
</li>
<li><p>目的MAC地址（Destination MAC Address）：6个字节的目的MAC地址，表示接收数据包的设备的MAC地址。</p>
</li>
<li><p>源MAC地址（Source MAC Address）：6个字节的源MAC地址，表示发送数据包的设备的MAC地址。</p>
</li>
<li><p>以太网类型（Ethernet Type）：2个字节的以太网类型字段，用于指示数据帧中携带的数据的类型。常见的以太网类型有IP协议、ARP协议等。</p>
</li>
<li><p>数据（Data）：46~1500个字节的数据，用于携带传输的信息。当数据字段的长度小于46字节时，应在数据字段的后面加入整数字节的填充字段，以保证以太网的MAC帧长不小于64字节。</p>
</li>
<li><p>帧校验序列（Frame Check Sequence，FCS）：4个字节的帧校验序列，用于检测数据帧是否出错。FCS是通过CRC算法生成的，它包含了整个数据帧的数据内容。当传输媒体的误码率为$1×10^{-8}$时，MAC子层可使未检测到的差错小于$1×10^{-14}$。</p>
</li>
</ol>
<h5><span id="ieee8023mac-帧格式">IEEE802.3MAC 帧格式</span></h5><ol>
<li><p>前导码（Preamble）：7个字节的前导码，用于标识一个数据帧的开始，具体内容为1010……1010。</p>
</li>
<li><p>帧起始定界符（Start Frame Delimiter，SFD）：1个字节的帧起始定界符，用于标识前导码的结束，内容为10101011。</p>
</li>
<li><p>目的MAC地址（Destination MAC Address）：6个字节的目的MAC地址，表示接收数据包的设备的MAC地址。</p>
</li>
<li><p>源MAC地址（Source MAC Address）：6个字节的源MAC地址，表示发送数据包的设备的MAC地址。</p>
</li>
<li><p>长度&#x2F;类型（Length&#x2F;Type）：2个字节的长度&#x2F;类型字段，用于指示数据帧中携带的数据的类型。如果该字段的值小于等于1500，则表示该字段指示了数据的长度；否则，表示该字段指示了数据的类型，例如IP协议、ARP协议等。</p>
</li>
<li><p>数据（Data）：46~1500个字节的数据，用于携带传输的信息。</p>
</li>
<li><p>帧校验序列（Frame Check Sequence，FCS）：4个字节的帧校验序列，用于检测数据帧是否出错。FCS是通过CRC算法生成的，它包含了整个数据帧的数据内容。</p>
</li>
<li><p>帧间隔（Interframe Gap，IFG）：12个字节的帧间隔，用于在两个数据帧之间进行时序的调整，以保证数据传输的稳定性。</p>
</li>
</ol>
<ul>
<li>与以太网V2MAC帧格式相似，区别在于：</li>
</ul>
<ol>
<li>IEEE 802.3规定的MAC帧的第三个字段是“长度&#x2F;类型”。</li>
</ol>
<p>当这个字段值大于0x0600时（相当于十进制的1536），就表示“类型”。这样的帧和以太网V2 MAC 帧完全一样。</p>
<p>当这个字段值小于0x0600时才表示“长度”。</p>
<ol start="2">
<li>当“长度&#x2F;类型”字段值小于0x0600时，数据字段必须装入上面的逻辑链路控制LLC子层的LLC帧。</li>
</ol>
<p>现在市场上流行的都是以太网V2的MAC帧，但大家也常常称为IEEE 802.3标准的MAC帧。</p>
<h5><span id="无效mac帧">无效MAC帧</span></h5><ul>
<li><p>数据字段的长度与长度字段的值不一致；</p>
</li>
<li><p>帧的长度不是整数个字节；</p>
</li>
<li><p>用收到的帧检验序列FCS查出有差错;</p>
</li>
<li><p>数据字段的长度不在46~1500字节之间。</p>
</li>
<li><p>有效的MAC帧长度为64~1518字节之间。</p>
</li>
<li><p>对于检查出的无效MAC 帧就简单地丢弃。以太网不负责重传丢弃的帧。</p>
</li>
</ul>
<h5><span id="帧的最小间隔">帧的最小间隔</span></h5><ul>
<li>帧间最小间隔为9.6 μs，相当于96 bit的发送时间。</li>
</ul>
<p>一个站在检测到总线开始空闲后，还要等待9.6μs才能再次发送数据。</p>
<p>这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。</p>
<h2><span id="扩展的以太网">扩展的以太网</span></h2><h3><span id="在物理层扩展以太网">在物理层扩展以太网</span></h3><ul>
<li><p>使用光纤扩展</p>
</li>
<li><p>使用集线器扩展</p>
</li>
</ul>
<p>集线器集联：使网络中计算机增加，变成一个大的冲突域，冲突域数量变少了，但是数量增加了，会造成效率降低。（越多效率越低，不适合使用超过30个集线器）</p>
<p>优点：使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信。扩大了以太网覆盖的地理范围。</p>
<p>缺点：碰撞域增大了，但总的吞吐量并未提高。如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来。</p>
<h3><span id="在数据链路层扩展以太网更常用的方法">在数据链路层扩展以太网(更常用的方法)</span></h3><ul>
<li>早期使用网桥，现在使用以太网交换机。</li>
</ul>
<h4><span id="使用网桥">使用网桥</span></h4><ul>
<li><p>在数据链路层扩展局域网是使用网桥。使用网桥可以拓展以太网的覆盖范围和提高网络性能。网桥是一种数据链路层设备，它可以连接多个以太网段，将它们组成一个逻辑上的单一网络。网桥通过学习每个网络中的MAC地址，将数据包从一个网络转发到另一个网络，从而实现不同网络之间的通信。</p>
</li>
<li><p>网桥工作在数据链路层，他根据MAC帧的目的地址对收到的帧进行转发。网桥具有过滤帧的功能。当网桥收到一个帧时，并不是向所有的接口转发此帧，而是先检查此帧的目的MAC地址，然后再确定将该帧转发到对应的接口，或把它丢弃。</p>
</li>
<li><p>使用网桥拓展以太网的步骤如下：</p>
</li>
</ul>
<ol>
<li><p>确定网络拓扑结构：首先需要确定网络中存在的以太网段，以及它们之间的连接方式和拓扑结构。根据网络拓扑结构，选择合适的网桥类型和数量。</p>
</li>
<li><p>配置网桥参数：将网桥接入网络中，配置网桥的参数，如MAC地址、IP地址、子网掩码等。这些参数可以通过网桥设备的管理接口进行配置。</p>
</li>
<li><p>学习MAC地址：网桥通过学习每个以太网段中的MAC地址，建立MAC地址表，记录每个MAC地址所在的网络段。当网桥收到一个数据包时，它会查询MAC地址表，将数据包转发到目标网络段中的设备。</p>
</li>
<li><p>转发数据包：当网桥接收到一个数据包时，它会首先检查目标MAC地址所在的网络段是否与源MAC地址所在的网络段相同。如果目标MAC地址不在同一网络段中，则网桥会将数据包转发到目标网络段中；否则，网桥会将数据包丢弃。<br>使用网桥可以将多个以太网段组成一个逻辑上的单一网络，提高网络的可靠性和性能。同时，网桥还可以隔离不同的网络段，防止网络中的广播风暴和冲突，提高网络的安全性和稳定性。</p>
</li>
</ol>
<ul>
<li>网桥的自学习算法：</li>
</ul>
<p>若从A发出的帧从接口x进入了某网桥，那么从这个接口出发沿相反方向一定可把一个帧传送到A。网桥每收到一个帧，就记下其源地址和进入网桥的接口，作为转发表中的一个项目。在建立转发表时是把帧首部中的源地址写在“地址”这一栏的下面。在转发帧时，则是根据收到的帧首部中的目的地址来转发的。这时就把在“地址”栏下面已经记下的源地址当作目的地址，而把记下的进入接口当作转发接口。</p>
<ul>
<li>好处</li>
</ul>
<p>过滤了通信量；扩大了物理范围；提高了可靠性；可互联不同的物理层，不同MAC子层和不同速率。</p>
<ul>
<li>坏处</li>
</ul>
<p>存储转发增加了时延；在MAC地址子层并没有流量控制功能；具有不同MAC子层的网段桥接在一起时时延更大；网桥值适合于用户数不太多和通信量不太大的局域网，否则有时还会因传播过多的广播信息而产生网络拥塞。这就是所谓的广播风暴。</p>
<h4><span id="使用以太网交换机">使用以太网交换机</span></h4><ul>
<li><p>以太网交换机实质上就是一个多接口的网桥，通常都有十几个或更多的接口。</p>
</li>
<li><p>每个接口都直接与一个单台主机或另一个以太网交换机相连，并且一般都工作在全双工方式。</p>
</li>
<li><p>以太网交换机的交换方式：存储转发方式、直通（cutthrough）方式</p>
</li>
<li><p>以太网交换机的特点：</p>
</li>
</ul>
<ol>
<li><p>高性能：以太网交换机采用硬件转发方式，能够实现高速数据传输和低延迟。通过交换机的缓存和转发能力，可以提高网络的吞吐量和性能。</p>
</li>
<li><p>灵活性：以太网交换机支持多种接口类型和速率，可以适应不同的网络环境和需求。同时，交换机还支持多种协议和网络服务，如VLAN、QoS等，提供更加灵活的网络配置和管理方式。</p>
</li>
<li><p>自学习：交换机可以自动学习网络中每个设备的MAC地址，并建立MAC地址表，记录设备的物理地址和端口号。当交换机收到一个数据包时，它会查询MAC地址表，将数据包转发到目标设备的端口上。</p>
</li>
<li><p>分割冲突域：以太网交换机将每个端口作为一个独立的冲突域，可以防止网络中的冲突和广播风暴。这种方式可以提高网络的可靠性和稳定性。</p>
</li>
<li><p>透明性：以太网交换机对网络上的设备和协议是透明的，不会影响设备之间的通信和网络协议的运行。同时，交换机还支持多种网络协议，如TCP&#x2F;IP、UDP、ICMP等，提供更加灵活的网络应用方式。</p>
</li>
</ol>
<h5><span id="以太网交换机的自学习功能">以太网交换机的自学习功能</span></h5><ul>
<li>以太网交换机的自学习功能的具体操作流程</li>
</ul>
<ol>
<li><p>当交换机接收到一个新的数据帧时，它会检查该帧的目标MAC地址，并将该地址与其端口关联起来，将该地址记录到其转发表中。</p>
</li>
<li><p>如果转发表中已经有了目标MAC地址的条目，则交换机可以直接将数据帧发送到对应的端口，而无需对所有端口进行广播。</p>
</li>
<li><p>如果转发表中没有目标MAC地址的条目，则交换机会将数据帧广播到所有连接的端口上，并记录下发送这个数据帧的源MAC地址和相应的端口信息。</p>
</li>
<li><p>一旦交换机确定了结构记录在转发表中的目标地址所对应的端口，它就只向那一个端口发送数据帧。</p>
</li>
<li><p>当交换机接收到新的数据帧时，它会再次更新转发表，删除多余或错误的信息，并学习记录新的MAC地址和端口信息。</p>
</li>
</ol>
<h5><span id="交换机使用生成树协议">交换机使用生成树协议</span></h5><ul>
<li><p>IEEE802.1D标准制定了一个生成树协议STP，用于消除兜圈子死循环现象。</p>
</li>
<li><p>生成树协议（Spanning Tree Protocol，STP）是一种用于以太网交换机网络中避免环路的协议。STP通过建立一棵生成树，保证网络中只有一条主干路径，从而避免数据包在网络中不断循环，造成网络拥塞和死锁。</p>
<ul>
<li>生成树算法（Spanning Tree Algorithm）是用于实现生成树协议的具体算法，最常用的是经典的 IEEE 802.1D 标准，该标准定义了以下步骤：</li>
</ul>
</li>
</ul>
<ol>
<li><p>选举根桥：在网络中，选举一个交换机作为根桥。根桥的选择通常是根据交换机的优先级和MAC地址来确定的。</p>
</li>
<li><p>计算路径开销：每个交换机计算到根桥的路径开销，路径开销包括端口的开销和链路的开销。其中，端口的开销是指端口的优先级和状态，链路的开销是指链路的带宽和延迟等因素。</p>
</li>
<li><p>选举根端口：每个非根交换机选举一个根端口，选举原则是选择路径开销最小的端口作为根端口。如果有多个端口开销相等，则根据端口的优先级和MAC地址来选择。</p>
</li>
<li><p>选举指定端口：每个交换机选举一个指定端口，指定端口是指连接网络中某个设备的端口。选举原则是选择路径开销次小的端口作为指定端口。如果有多个端口开销相等，则根据端口的优先级和MAC地址来选择。</p>
</li>
<li><p>阻塞端口：在生成树中，如果存在环路，则需要选择一些端口进行阻塞，从而避免数据包在网络中不断循环。阻塞端口是指连接到环路上的端口，选举原则是选择路径开销最大的端口进行阻塞。</p>
</li>
</ol>
<h5><span id="从总线以太网到星形以太网">从总线以太网到星形以太网</span></h5><ul>
<li><p>从总线以太网到星形以太网是以太网架构的演进历程，总线以太网是最早的以太网架构，所有设备共享同一条传输介质。而星形以太网采用了集线器&#x2F;交换机来分割网络，将每个设备连接到一个中心节点，从而提高了网络的可靠性和性能。</p>
</li>
<li><p>总线以太网使用CSMA&#x2F;CD协议，以半双工方式工作，存在碰撞问题。而以太网交换机实现的星形以太网以全双工方式工作，不存在碰撞问题，但由于帧结构未改变，仍采用以太网的帧结构，所以还叫做以太网。</p>
</li>
</ul>
<h3><span id="虚拟局域网">虚拟局域网</span></h3><ul>
<li><p>虚拟局域网（Virtual Local Area Network，VLAN）是一种将物理网络划分为多个逻辑网络的技术。VLAN可以通过软件配置来实现，无需更改物理网络拓扑结构，从而方便网络管理和配置。</p>
</li>
<li><p>VLAN可以将一组网络设备划分为一个独立的逻辑网络，不同的VLAN之间可以相互隔离，从而提高网络安全性和灵活性。例如，可以将某个部门的计算机划分到一个VLAN中，使得该部门的计算机只能与该VLAN中的其他设备进行通信，而无法与其他VLAN中的设备通信。</p>
</li>
<li><p>VLAN的实现可以基于端口、MAC地址、IP地址等多种方式，常见的实现方式包括：</p>
</li>
</ul>
<ol>
<li><p>基于端口：将交换机的端口划分到不同的VLAN中，不同VLAN之间通过路由器进行通信。</p>
</li>
<li><p>基于MAC地址：将设备的MAC地址作为VLAN的标识符，相同VLAN中的设备拥有相同的MAC地址前缀。</p>
</li>
<li><p>基于IP地址：将设备的IP地址作为VLAN的标识符，相同VLAN中的设备拥有相同的IP地址前缀。</p>
</li>
</ol>
<ul>
<li>VLAN的优点包括：</li>
</ul>
<ol>
<li><p>提高网络安全性：不同的VLAN之间可以相互隔离，从而避免未经授权的访问和攻击。</p>
</li>
<li><p>灵活性高：可以根据不同的需求和场景，灵活地划分不同的VLAN，从而提高网络的灵活性和可扩展性。</p>
</li>
<li><p>管理和配置方便：VLAN的管理和配置可以通过软件进行，无需更改物理网络拓扑结构，从而方便网络管理和配置。<br>综上所述，VLAN是一种将物理网络划分为多个逻辑网络的技术，可以提高网络安全性和灵活性，方便网络管理和配置。</p>
</li>
</ol>
<ul>
<li>虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。</li>
</ul>
<h4><span id="虚拟局域网使用的以太网帧格式">虚拟局域网使用的以太网帧格式</span></h4><ul>
<li>虚拟局域网（VLAN）使用的以太网帧格式与普通的以太网帧格式基本一致，但在帧头和帧尾中加入了VLAN标记。下面是VLAN使用的以太网帧格式：</li>
</ul>
<ol>
<li><p>目的MAC地址（6个字节）：表示帧的接收方的MAC地址。</p>
</li>
<li><p>源MAC地址（6个字节）：表示帧的发送方的MAC地址。</p>
</li>
<li><p>VLAN标记（4个字节）：包含802.1Q标记类型和标记控制信息。</p>
</li>
</ol>
<p>VLAN标记的前两个字节总是设置为0x8100（即二进制10000001 00000000），称为IEEE802.1Q标记类型。</p>
<p>当数据链路层检测到MAC帧的源地址字段后面的两个字节值为0x8100时，就知道现在插入了4字节的VLAN标记。于是就接着检查后面两个字节的内容。后面的两个字节，前3位时用户优先级字段，接着的一位时规范格式提示符CFI（Canonical Format Indicator），最后12位时该虚拟局域网VLAN标识符VID（VLAN ID）唯一标志这个以太网帧属于哪一个VLAN。</p>
<ol start="4">
<li><p>类型&#x2F;长度字段（2个字节）：表示帧中上层协议的类型或数据长度。</p>
</li>
<li><p>数据字段（46~1500个字节）：表示上层协议的数据。</p>
</li>
<li><p>帧校验序列（FCS）（4个字节）：对整个帧进行校验，用于检测传输错误。</p>
</li>
<li><p>帧尾（1个字节）：表示帧的结束。</p>
</li>
</ol>
<h2><span id="高速以太网">高速以太网</span></h2><ul>
<li>高速以太网（High-Speed Ethernet)是一种以太网技术，用于实现高速数据传输。</li>
</ul>
<h3><span id="100base-t以太网">100BASE-T以太网</span></h3><ul>
<li><p>100BASE-T是一种以太网技术，也被称为快速以太网。它可以在100Mbps的传输速度下运行，并且使用双绞线作为物理媒介来传输数据。</p>
</li>
<li><p>100BASE-T以太网使用了交织的4B&#x2F;5B编码方案来将字节转换为信号。这种编码方案可以保证数据传输的稳定性和可靠性。它还使用了基带传输技术，即直接将数字信号发送到传输媒介上，避免了模拟信号的转换，从而提高了传输效率。</p>
</li>
<li><p>在100BASE-T以太网中，数据通过RJ-45插座连接到双绞线上，双绞线再连接到集线器或交换机等网络设备上。由于采用了CSMA&#x2F;CD协议，所以多台计算机可以同时使用同一个以太网来进行通信。</p>
</li>
<li><p>100Base-T以太网的物理层标准</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">媒体</th>
<th align="center">网段的最大长度</th>
<th align="center">特点</th>
</tr>
</thead>
<tbody><tr>
<td align="center">100BASE-TX</td>
<td align="center">铜缆</td>
<td align="center">100m</td>
<td align="center">两对UTP5类线或屏蔽双绞线STP</td>
</tr>
<tr>
<td align="center">100BASE-T4</td>
<td align="center">铜缆</td>
<td align="center">100m</td>
<td align="center">4对UTP3类线或5类线</td>
</tr>
<tr>
<td align="center">100BASE-FX</td>
<td align="center">光缆</td>
<td align="center">2000m</td>
<td align="center">两根光纤，发送和接收各一根</td>
</tr>
</tbody></table>
<ul>
<li>特点</li>
</ul>
<p>可以实现全双工通信(注意，如果交换机上某一路连接着集线器(半双工)，则这一路不能实现全双工)而无冲突，此时不使用CSMA&#x2F;CD协议。</p>
<p>MAC帧格式不变，仍是802.3 标准。</p>
<p>最短帧长度不变，但是一个网段的最大电缆长度减少到100m。</p>
<p>帧间间隔从9.6微秒缩小到0.96微秒。</p>
<h3><span id="吉比特以太网">吉比特以太网</span></h3><ul>
<li><p>允许在1 Gb&#x2F;s下全双工或半双工工作方式。</p>
</li>
<li><p>使用802.3标准的帧格式。</p>
</li>
<li><p>在半双工下使用CSMA&#x2F;CD协议。</p>
</li>
<li><p>当吉比特以太网在全双工方式时，不用载波延伸和分组冲突。</p>
</li>
<li><p>与10Base-T和100Base-T技术向后兼容。</p>
</li>
<li><p>1000Base-X以太网的物理层：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">媒体</th>
<th align="center">网段最大长度</th>
<th align="center">特点</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1000BASE-SX</td>
<td align="center">光缆</td>
<td align="center">550m</td>
<td align="center">多模光纤（50和62.5μm）</td>
</tr>
<tr>
<td align="center">1000BASE-LX</td>
<td align="center">光缆</td>
<td align="center">5000m</td>
<td align="center">单模光纤（10μm）多模光纤（50和62.5μm）</td>
</tr>
<tr>
<td align="center">1000BASE-CX</td>
<td align="center">铜缆</td>
<td align="center">25m</td>
<td align="center">使用2对屏蔽双绞线电缆STP</td>
</tr>
<tr>
<td align="center">1000BASE-T</td>
<td align="center">铜缆</td>
<td align="center">100m</td>
<td align="center">使用4对UTP5类线</td>
</tr>
</tbody></table>
<h3><span id="10吉比特以太网和更快的以太网">10吉比特以太网和更快的以太网</span></h3><ul>
<li><p>MAC帧格式不变，仍是802.3 标准。</p>
</li>
<li><p>使用光纤而不是铜线。</p>
</li>
<li><p>只能工作在全双工方式，没有争用问题。</p>
</li>
<li><p>它的出现使工作范围从局域网扩大到城域网和广域网，实现了端到端的以太网传输。</p>
</li>
<li><p>优点：技术成熟；互操作性好；广域网中使用以太网便宜；统一的帧格式。</p>
</li>
<li><p>40GB&#x2F;100GB以太网物理层标准</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">物理层</th>
<th align="center">40GB以太网</th>
<th align="center">10GB以太网</th>
</tr>
</thead>
<tbody><tr>
<td align="center">在背板上传输至少超过1m</td>
<td align="center">40GBASE-KR4</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">在铜缆上传输至少超过7m</td>
<td align="center">40GBASE-CR4</td>
<td align="center">100GBASE-CR10</td>
</tr>
<tr>
<td align="center">在多模光纤上传输至少超过10m</td>
<td align="center">40GBASE-SR4</td>
<td align="center">100GBASE-SR10，100GBASE-SR4</td>
</tr>
<tr>
<td align="center">在单模光纤上传输至少超过10km</td>
<td align="center">40GBASE-LR4</td>
<td align="center">100GBASE-LR4</td>
</tr>
<tr>
<td align="center">在单模光纤上传输至少超过40km</td>
<td align="center">40GBASE-ER4</td>
<td align="center">100GBASE-ER4</td>
</tr>
</tbody></table>
<ul>
<li>以太网时可扩展的（速率从100Mbit&#x2F;s到100Gbit&#x2F;s）、灵活的（多媒体、全&#x2F;半双工、共享&#x2F;交换）、易于安装、稳健性好。</li>
</ul>
<h3><span id="使用以太网进行宽带接入">使用以太网进行宽带接入</span></h3><ul>
<li>以太网是一种计算机局域网技术，它可以通过使用特定的物理介质（如双绞线或光纤）将计算机设备连接到互联网服务提供商（ISP）的网络中。在宽带接入方案中，以太网通常用于将用户家庭或办公室内的路由器或调制解调器与ISP提供的宽带调制解调器相连接。这种连接方式可以提供高速、可靠的互联网连接，并且可以支持多个用户同时访问互联网。在以太网上实现宽带接入需要使用特定的协议和技术，例如动态主机配置协议（DHCP）、传输控制协议&#x2F;互联网协议（TCP&#x2F;IP）和数据包交换技术等。</li>
</ul>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" rel="tag"><i class="fa fa-tag"></i> 数据链路层</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E7%89%A9%E7%90%86%E5%B1%82/" rel="prev" title="物理层">
                  <i class="fa fa-chevron-left"></i> 物理层
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E7%BD%91%E7%BB%9C%E5%B1%82/" rel="next" title="网络层">
                  网络层 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fingsinz</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">106k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">3:12</span>
  </span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.11/pdfobject.min.js","integrity":"sha256-N6JtCNwaYm6kizuG92UtOOXamRHPwu+V1yF10g3bu/c="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>



  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
